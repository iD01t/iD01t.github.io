<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Audiobooks • iD01t Productions</title>
  <meta name="description" content="Explore Guillaume Lessard / iD01t Productions audiobooks. Filter by language, year, length, narrator, and genre. All links point to Google Books/Play." />
  <link rel="canonical" href="/audiobooks.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Audiobooks • iD01t Productions" />
  <meta property="og:description" content="Official audiobooks hub. Filterable, fast, and SEO‑ready." />
  <meta property="og:url" content="/audiobooks.html" />
  <meta property="og:image" content="/assets/img/placeholders/card-square-640.webp" />
  <link rel="icon" href="/assets/favicon.ico" />
  <link rel="apple-touch-icon" href="/assets/logo-512.png" />
  <link rel="stylesheet" href="/assets/site.css" />

  <!-- GA/GTM -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CHX65WY0WZ"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-CHX65WY0WZ');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GT-M39S87SN');</script>

  <style>
    :root{--border:rgba(255,255,255,.12);--card:rgba(255,255,255,.05);--muted:rgba(255,255,255,.75);--accent:#0ea5e9}
    @media (prefers-color-scheme: dark){body{background:#0b0d10;color:#eaeaf0}}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}
    .glass{background:var(--card);backdrop-filter:blur(10px)}
    .card{border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .btn{display:inline-block;padding:10px 12px;border:1px solid var(--border);border-radius:12px;text-decoration:none;color:inherit;background:rgba(255,255,255,.03)}
    .btn:hover{filter:brightness(1.07)}
    .chip{font-size:.8rem;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.04)}
    header.sticky{position:sticky;top:0;z-index:50;background:rgba(11,13,16,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .nav a{color:inherit;text-decoration:none;margin:0 8px;opacity:.9}
    .nav a[aria-current="page"], .nav a:hover{opacity:1}
    .hero{padding:56px 0;background:linear-gradient(135deg,#111827 0%,#0b0d10 60%,#0b0d10 100%)}
    .hero h1{font-size:clamp(28px,4vw,44px);margin:0 0 8px}
    .hero p{opacity:.85;margin:0}
    .toolbar{display:grid;grid-template-columns:1.2fr 150px 150px 150px 150px 1fr;gap:10px;align-items:end;margin:18px 0}
    .toolbar label{font-size:.85rem;color:var(--muted);display:block;margin-bottom:6px}
    .toolbar input,.toolbar select{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:inherit}
    .toolbar .wide{grid-column:1/-1;display:flex;gap:10px;align-items:center}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .tile img{width:100%;aspect-ratio:3/4;object-fit:cover;background:#111}
    .tile .content{padding:14px;display:flex;flex-direction:column;gap:10px}
    .muted{opacity:.8}
    footer{border-top:1px solid var(--border);padding:24px 0;margin-top:32px;opacity:.8;text-align:center}
  </style>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GT-M39S87SN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <!-- Shared header (pulls from index.html if present) -->
  <header id="site-header" class="sticky">
    <div class="wrap nav">
      <a href="/" class="logo" aria-label="iD01t Home"><strong>iD01t</strong></a>
      <nav>
        <a href="/store.html">Store</a>
        <a href="/ebooks.html">eBooks</a>
        <a href="/audiobooks.html" aria-current="page"><strong>Audiobooks</strong></a>
        <a href="/apps.html">Apps</a>
        <a href="/games.html">Games</a>
        <a href="/music.html">Music</a>
        <a href="/services.html">Services</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <h1>Audiobooks — iD01t Productions</h1>
      <p>Filter by language, year, length, narrator, and genre. Every CTA links to Google Books / Google Play Books.</p>
    </div>
  </section>

  <main class="wrap">
    <!-- Filters -->
    <section class="toolbar">
      <div>
        <label for="q">Search</label>
        <input id="q" type="search" placeholder="Title, keyword" />
      </div>
      <div>
        <label for="language">Language</label>
        <select id="language"></select>
      </div>
      <div>
        <label for="from">From (year)</label>
        <input id="from" type="number" inputmode="numeric" placeholder="2018" />
      </div>
      <div>
        <label for="to">To (year)</label>
        <input id="to" type="number" inputmode="numeric" placeholder="2025" />
      </div>
      <div>
        <label for="minh">Min hours</label>
        <input id="minh" type="number" step="0.5" placeholder="0" />
      </div>
      <div>
        <label for="sort">Sort</label>
        <select id="sort">
          <option value="date_desc">Newest</option>
          <option value="date_asc">Oldest</option>
          <option value="title_asc">Title A–Z</option>
          <option value="title_desc">Title Z–A</option>
          <option value="length_desc">Longest</option>
          <option value="length_asc">Shortest</option>
        </select>
      </div>
      <div class="wide">
        <label class="muted"><input id="hasSample" type="checkbox" /> With free sample</label>
        <label class="muted"><input id="seriesOnly" type="checkbox" /> In a series</label>
        <label class="muted"><input id="soloNarrator" type="checkbox" /> Single narrator</label>
        <button id="clear" class="btn" type="button">Clear filters</button>
      </div>
    </section>

    <!-- Featured -->
    <section class="card glass" style="padding:16px;margin-bottom:16px">
      <div style="display:grid;grid-template-columns:1.2fr 1fr;gap:16px;align-items:center">
        <div>
          <h2 style="margin:0 0 6px">Featured Audiobook</h2>
          <p id="featured-desc" class="muted" style="margin:0 0 10px">Hand‑picked highlight from the latest releases.</p>
          <div id="featured-card" class="card" style="overflow:hidden;border-radius:12px"></div>
        </div>
        <div>
          <h3 style="margin:0 0 6px">Narration & Custom Audio</h3>
          <p class="muted" style="margin:0 0 10px">Need a narrated version or custom soundtrack? Commission professional production.</p>
          <a href="/contact.html" class="btn">Get in touch</a>
        </div>
      </div>
    </section>

    <!-- Grid -->
    <section>
      <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0 14px">
        <h2 style="margin:0">Catalog</h2>
        <span id="count" class="muted" style="font-size:.9rem"></span>
      </div>
      <div id="grid" class="grid"></div>
    </section>
  </main>

  <footer>
    <div class="wrap">© <span id="year"></span> iD01t Productions</div>
  </footer>

  <script>
    // Load shared header from index.html if present
    (async function loadSharedHeader(){
      try{const res=await fetch('/index.html'); if(!res.ok) return; const html=await res.text(); const doc=new DOMParser().parseFromString(html,'text/html'); const shared=doc.querySelector('#site-header'); if(shared){document.getElementById('site-header').outerHTML=shared.outerHTML;}}catch{}}
    )();

    document.getElementById('year').textContent = new Date().getFullYear();

    // Elements
    const el = id=>document.getElementById(id);
    const q=el('q'), language=el('language'), from=el('from'), to=el('to'), minh=el('minh'), sort=el('sort');
    const hasSample=el('hasSample'), seriesOnly=el('seriesOnly'), soloNarrator=el('soloNarrator');
    const clearBtn=el('clear'), grid=el('grid'), count=el('count');

    function esc(s){return String(s||'').replace(/[&<>\"]/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[c]))}
    function chip(text){return `<span class="chip">${esc(text)}</span>`}
    const fmtDur = h => (isFinite(h) ? `${(+h).toFixed(h%1?1:0)}h` : '');
    const toISO8601 = h => (isFinite(h) ? `PT${Math.floor(h)}H${Math.round((h%1)*60)}M` : undefined);

    function cardHTML(a){
      const tags = [a.language, a.genre, a.narrator && (a.narrators?.length>1?'Multi‑narrator':'Solo narrator')].filter(Boolean).map(chip).join(' ');
      const gplay = a.googlePlay || a.googleBooks || a.url || '#';
      return `
      <article class="card" style="background:var(--card)">
        <img src="${esc(a.cover||'/assets/img/placeholders/card-3x4-640.webp')}" alt="${esc(a.title)} cover"/>
        <div class="content">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:10px">
            <h3 style="margin:0">${esc(a.title)}</h3>
            <span class="muted" style="font-size:.9rem">${esc(a.year||'')}</span>
          </div>
          <div class="muted">${esc(a.narrator || (a.narrators||[]).join(', '))}${a.hours?` • ${fmtDur(a.hours)}`:''}</div>
          <div style="display:flex;gap:6px;flex-wrap:wrap">${tags}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn" href="${esc(gplay)}" target="_blank" rel="noopener nofollow">Google Books</a>
          </div>
        </div>
      </article>`
    }

    function emitSchema(items){
      const author = 'Guillaume Lessard';
      const ld = {
        '@context':'https://schema.org', '@type':'ItemList', name:`${author} Audiobooks`,
        itemListElement: items.slice(0,60).map((a,i)=>({
          '@type':'ListItem', position:i+1,
          item:{
            '@type':'Audiobook',
            name:a.title, author:{'@type':'Person','name':author},
            inLanguage:a.language, datePublished:a.year?String(a.year):undefined,
            image:a.cover, url:a.googlePlay||a.googleBooks||a.url,
            duration: toISO8601(a.hours),
            readBy: (a.narrators|| (a.narrator?[a.narrator]:[])).map(n=>({'@type':'Person','name':n}))
          }
        }))
      };
      let tag=document.getElementById('ld-audiobooks');
      if(!tag){tag=document.createElement('script');tag.id='ld-audiobooks';tag.type='application/ld+json';document.head.appendChild(tag);} 
      tag.textContent = JSON.stringify(ld);
    }

    function populateLanguages(items){
      const langs = Array.from(new Set(items.map(x=>x.language).filter(Boolean))).sort();
      language.innerHTML = '<option value="">All</option>'+langs.map(l=>`<option value="${esc(l)}">${esc(l)}</option>`).join('');
    }

    function applyFilters(items){
      const text=(q.value||'').toLowerCase();
      const lang=language.value; const f=parseInt(from.value||''); const t=parseInt(to.value||''); const min=parseFloat(minh.value||'');
      let list = items.filter(a=>{
        if(text){const hay=[a.title,a.narrator,(a.narrators||[]).join(' '),(a.genre||''),(a.series||'')].join(' ').toLowerCase(); if(!hay.includes(text)) return false;}
        if(lang && a.language!==lang) return false;
        if(!isNaN(f) && (a.year||0) < f) return false;
        if(!isNaN(t) && (a.year||0) > t) return false;
        if(!isNaN(min) && (+a.hours||0) < min) return false;
        if(hasSample.checked && !a.sample) return false;
        if(seriesOnly.checked && !a.series) return false;
        if(soloNarrator.checked && (a.narrators&&a.narrators.length>1)) return false;
        return true;
      });
      const s=sort.value; const byTitle=(a,b)=>a.title.localeCompare(b.title);
      if(s==='date_asc') list.sort((a,b)=>(a.year||0)-(b.year||0));
      else if(s==='title_asc') list.sort(byTitle);
      else if(s==='title_desc') list.sort((a,b)=>byTitle(b,a));
      else if(s==='length_desc') list.sort((a,b)=>(+b.hours||0)-(+a.hours||0));
      else if(s==='length_asc') list.sort((a,b)=>(+a.hours||0)-(+b.hours||0));
      else list.sort((a,b)=>(b.year||0)-(a.year||0));
      return list;
    }

    function render(list){
      grid.innerHTML = list.map(cardHTML).join('') || '<div class="muted">No results. Adjust filters.</div>';
      count.textContent = `${list.length} audiobook${list.length!==1?'s':''}`;
      emitSchema(list);
    }

    function bind(items){
      const again=()=>render(applyFilters(items));
      ['input','change'].forEach(evt=>{
        [q,language,from,to,minh,sort,hasSample,seriesOnly,soloNarrator].forEach(e=>e.addEventListener(evt,again));
      });
      clearBtn.addEventListener('click',()=>{q.value='';language.value='';from.value='';to.value='';minh.value='';sort.value='date_desc';hasSample.checked=false;seriesOnly.checked=false;soloNarrator.checked=false;again();});
    }

    async function init(){
      try{
        const res=await fetch('/assets/data/audiobooks.json',{cache:'no-store'});
        const data=await res.json();
        const items = Array.isArray(data) ? data : (data.items||[]);
        populateLanguages(items);
        // Featured (first newest)
        const feat = items.slice().sort((a,b)=>(b.year||0)-(a.year||0))[0];
        if(feat){
          document.getElementById('featured-card').innerHTML = cardHTML(feat);
        }
        bind(items);
        render(applyFilters(items));
      }catch(e){
        console.error('Unable to load /assets/data/audiobooks.json',e);
        grid.innerHTML='<div class="muted">Could not load audiobooks. Add <code>assets/data/audiobooks.json</code>.</div>';
      }
    }

    init();
  </script>
</body>
</html>
