<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Audiobooks · iD01t Productions</title>
  <meta name="description" content="Audiobooks by iD01t Productions — narrated titles, spoken word, and audio editions. Live from Google Books API."/>
  <link rel="canonical" href="https://id01t.github.io/audiobooks.html"/>
  <meta name="theme-color" content="#16185c"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Audiobooks · iD01t Productions"/>
  <meta property="og:description" content="Browse narrated titles and audio editions by Guillaume Lessard."/>
  <meta property="og:image" content="https://id01t.github.io/assets/img/placeholders/card-square-640.webp"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Audiobooks · iD01t Productions"/>
  <meta name="twitter:description" content="Narrated titles and audio editions."/>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{colors:{brand:{50:"#f5f6ff",100:"#e6e9ff",200:"#c9ccff",300:"#a2a8ff",400:"#7a82ff",500:"#545cff",600:"#3a3fe6",700:"#2c30b4",800:"#202383",900:"#16185c"}}}}};</script>
  <link rel="stylesheet" href="/css/custom.css">
  <style>
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .link-underline {
      position: relative;
      text-decoration: none;
    }
    .link-underline::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -2px;
      left: 0;
      background-color: #3a3fe6;
      transition: width 0.3s ease;
    }
    .link-underline:hover::after {
      width: 100%;
    }
    .dark .link-underline::after {
      background-color: #7a82ff;
    }
  </style>
  <script>(function(){const s=localStorage.getItem('theme');const d=matchMedia('(prefers-color-scheme: dark)').matches;if(s==='dark'||(!s&&d))document.documentElement.classList.add('dark');})();</script>

  <link rel="preconnect" href="https://www.googleapis.com">
  
  <!-- Google Books API Key -->
  <meta name="google-books-api-key" content="AIzaSyB_YuwaxJeZuDMijJA6eS6WQ3x28k3SI14">
</head>
<body class="bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100">
  
<header class="sticky top-0 z-50 backdrop-blur supports-backdrop-blur:bg-white/70 bg-white/70 dark:bg-slate-950/60 border-b border-slate-200/60 dark:border-slate-800">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <a href="/" class="flex items-center gap-2" aria-label="Home">
        <img src="/assets/img/brand/logo.png" class="h-8 w-8" alt="iD01t Productions">
        <span class="font-semibold tracking-tight">iD01t Productions</span>
      </a>
      <nav class="hidden md:flex items-center gap-6" aria-label="Primary">
        <a href="/store.html" class="link-underline">Store</a> <a href="/ebooks.html" class="link-underline">eBooks</a> <a href="/audiobooks.html" class="link-underline">Audiobooks</a> <a href="/apps.html" class="link-underline">Apps</a> <a href="/games.html" class="link-underline">Games</a> <a href="/music.html" class="link-underline">Music</a> <a href="/blog.html" class="link-underline">Blog</a> <a href="/about.html" class="link-underline">About</a> <a href="/contact.html" class="link-underline">Contact</a>
      </nav>
      <div class="flex items-center gap-3">
        <button id="themeToggle" class="rounded-full border border-slate-300 dark:border-slate-700 px-3 py-1 text-sm">Theme</button>
        <a href="/#newsletter" class="inline-flex items-center rounded-full bg-brand-600 hover:bg-brand-700 text-white text-sm px-4 py-2">Newsletter</a>
        <button id="mobileMenuBtn" class="md:hidden inline-flex items-center justify-center p-2 rounded-lg border border-slate-300 dark:border-slate-700" aria-label="Open menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M3 12h18M3 18h18"/></svg>
        </button>
      </div>
    </div>
  </div>
  <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 dark:border-slate-800" role="dialog" aria-modal="true">
    <div class="px-4 py-3 flex flex-col gap-2">
      <a href="/store.html" class="py-2">Store</a><a href="/ebooks.html" class="py-2">eBooks</a><a href="/audiobooks.html" class="py-2">Audiobooks</a><a href="/apps.html" class="py-2">Apps</a><a href="/games.html" class="py-2">Games</a><a href="/music.html" class="py-2">Music</a><a href="/blog.html" class="py-2">Blog</a><a href="/about.html" class="py-2">About</a><a href="/contact.html" class="py-2">Contact</a>
    </div>
  </div>
</header>

  <!-- Hero -->
  <section class="relative overflow-hidden bg-gradient-to-br from-brand-50 to-white dark:from-slate-900 dark:to-slate-950">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-16 pb-12 text-center">
      <div class="max-w-3xl mx-auto">
        <h1 class="text-5xl sm:text-6xl lg:text-7xl font-bold tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent">
          Audiobooks
        </h1>
        <p class="mt-6 text-xl sm:text-2xl text-slate-600 dark:text-slate-300 font-medium leading-relaxed">
          Immerse yourself in narrated editions and spoken word content
        </p>
        <p class="mt-4 text-lg text-slate-500 dark:text-slate-400">
          Auto-populated from Google Books API • Live catalog updates
        </p>
        <div class="mt-8 inline-flex items-center gap-2 px-4 py-2 bg-white/80 dark:bg-slate-800/80 rounded-full border border-slate-200 dark:border-slate-700 backdrop-blur-sm">
          <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
          <span class="text-sm font-medium text-slate-600 dark:text-slate-300">Last updated: September 06, 2025</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Controls -->
  <section class="py-8 bg-slate-50/50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="mb-6">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2">Search & Filter</h2>
        <p class="text-slate-600 dark:text-slate-400">Find your perfect audiobook with our advanced search tools</p>
      </div>
      
      <div class="grid gap-4 md:grid-cols-12 items-end">
        <div class="md:col-span-6">
          <label for="q" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Search</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
            <input id="q" type="search" placeholder="Search title, author, keywords..." 
                   class="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200" />
          </div>
        </div>
        
        <div class="md:col-span-2">
          <label for="language" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Language</label>
          <select id="language" class="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200">
            <option value="">All languages</option>
          </select>
        </div>
        
        <div class="md:col-span-2">
          <label for="from" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">From Year</label>
          <input id="from" type="number" inputmode="numeric" placeholder="2020" 
                 class="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200" />
        </div>
        
        <div class="md:col-span-2">
          <label for="to" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">To Year</label>
          <input id="to" type="number" inputmode="numeric" placeholder="2025" 
                 class="w-full rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200" />
        </div>
        
        <div class="md:col-span-12 flex flex-wrap items-center gap-3 pt-4">
          <div class="flex items-center gap-2">
            <label for="sort" class="text-sm font-medium text-slate-700 dark:text-slate-300">Sort by:</label>
            <select id="sort" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200">
              <option value="date_desc">Newest First</option>
              <option value="date_asc">Oldest First</option>
            <option value="title_asc">Title A—Z</option>
            <option value="title_desc">Title Z—A</option>
          </select>
          </div>
          
          <button id="reset" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-all duration-200">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Reset
          </button>
          
          <button id="refresh" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Refresh
          </button>
          
          <div id="tally" class="ml-auto text-sm text-slate-500 dark:text-slate-400 font-medium"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Grid -->
  <section class="py-12 bg-white dark:bg-slate-950">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8">
        <div>
          <h2 class="text-3xl font-bold text-slate-900 dark:text-slate-100">Audiobook Catalog</h2>
          <p class="mt-2 text-slate-600 dark:text-slate-400">Discover our curated collection of narrated content</p>
        </div>
        <div id="count" class="text-lg font-semibold text-brand-600 dark:text-brand-400"></div>
      </div>
      
      <div id="loading" class="text-center py-16">
        <div class="inline-flex flex-col items-center gap-4">
          <div class="w-12 h-12 border-4 border-brand-200 dark:border-brand-800 border-t-brand-600 dark:border-t-brand-400 rounded-full animate-spin"></div>
          <p class="text-lg text-slate-600 dark:text-slate-400 font-medium">Loading audiobooks...</p>
          <p class="text-sm text-slate-500 dark:text-slate-500">Fetching from Google Books API</p>
        </div>
      </div>
      
      <div id="grid" class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 mt-8 hidden"></div>
      
      <noscript>
        <div class="text-center py-16 bg-slate-50 dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800">
          <div class="max-w-md mx-auto">
            <div class="w-16 h-16 mx-auto mb-4 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center">
              <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2">JavaScript Required</h3>
            <p class="text-slate-600 dark:text-slate-400">Please enable JavaScript to view the audiobooks catalog.</p>
          </div>
        </div>
      </noscript>
      
      <div id="empty" class="text-center py-16 hidden">
        <div class="max-w-md mx-auto">
          <div class="w-16 h-16 mx-auto mb-4 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.709M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2">No Results Found</h3>
          <p class="text-slate-600 dark:text-slate-400 mb-4">Try adjusting your search criteria or filters.</p>
          <button id="reset" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 rounded-lg transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Reset Filters
          </button>
        </div>
      </div>
    </div>
  </section>

<footer class="py-16 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
      <div class="md:col-span-2">
        <div class="flex items-center gap-3 mb-4">
          <img src="/assets/img/brand/logo.png" class="h-10 w-10" alt="iD01t Productions">
          <div>
            <h3 class="text-xl font-bold text-slate-900 dark:text-slate-100">iD01t Productions</h3>
            <p class="text-sm text-slate-600 dark:text-slate-400">Creative Digital Content</p>
          </div>
        </div>
        <p class="text-slate-600 dark:text-slate-400 max-w-md leading-relaxed">
          Discover our curated collection of audiobooks, ebooks, and digital content. 
          Immerse yourself in narrated stories and educational content.
        </p>
      </div>
      
      <div>
        <h4 class="text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4">Quick Links</h4>
        <nav class="flex flex-col gap-3">
          <a href="/store.html" class="text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">Store</a>
          <a href="/ebooks.html" class="text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">eBooks</a>
          <a href="/audiobooks.html" class="text-brand-600 dark:text-brand-400 font-medium">Audiobooks</a>
          <a href="/blog.html" class="text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">Blog</a>
          <a href="/about.html" class="text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">About</a>
        </nav>
      </div>
    </div>
    
    <div class="pt-8 border-t border-slate-200 dark:border-slate-800">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
          <p class="text-sm text-slate-500 dark:text-slate-400">© <span id="year"></span> iD01t Productions. All rights reserved.</p>
          <div class="flex items-center gap-4">
            <a href="/legal/terms.html" class="text-sm text-slate-500 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">Terms</a>
            <a href="/legal/privacy.html" class="text-sm text-slate-500 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">Privacy</a>
            <a href="/legal/refunds.html" class="text-sm text-slate-500 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">Refunds</a>
          </div>
        </div>
        
        <div class="flex items-center gap-4">
          <a href="https://github.com/id01t" target="_blank" rel="noopener" 
             class="inline-flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            GitHub
          </a>
          <a href="https://id01t.itch.io" target="_blank" rel="noopener" 
             class="inline-flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/>
            </svg>
            itch.io
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>

  <script>
    // Theme and mobile menu functionality
    document.getElementById('year').textContent = new Date().getFullYear();
    
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', function() {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        themeToggle.setAttribute('aria-pressed', String(isDark));
      });
    }
    
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    if (mobileMenuBtn && mobileMenu) {
      mobileMenuBtn.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
      });
    }

    // Audiobooks functionality
    const CONFIG = {
      API_KEY: "AIzaSyB_YuwaxJeZuDMijJA6eS6WQ3x28k3SI14",
      AUTHOR: "Guillaume Lessard",
      PUBLISHER: "iD01t Productions",
      PAGE_SIZE: 40,
      MAX_PAGES: 5,
      RETRIES: 3,
      TIMEOUT: 9000
    };

    // Fallback data
    const FALLBACK_DATA = [
      {
        id: "ab-unstoppable",
        title: "Unstoppable: Unlock Your Potential (Audiobook)",
        authors: "Guillaume Lessard",
        year: 2025,
        language: "en",
        categories: ["Self-Improvement"],
        description: "High-impact systems, mindset, and automation. Audiobook edition with enhanced narration and production quality.",
        image: "/assets/img/placeholders/card-portrait-384x576.webp",
        infoLink: "https://books.google.com/books?id=unstoppable-audiobook",
        isAudiobook: true,
        localUrl: "/audiobooks/unstoppable.html"
      },
      {
        id: "ab-python-hero",
        title: "Python Zero to Hero (Audiobook Edition)",
        authors: "Guillaume Lessard",
        year: 2025,
        language: "en",
        categories: ["Programming"],
        description: "A narrated path from absolute beginner to productive Python developer. Perfect for learning while commuting.",
        image: "/assets/img/placeholders/card-portrait-384x576.webp",
        infoLink: "https://books.google.com/books?id=python-zero-to-hero-audio",
        isAudiobook: true,
        localUrl: "/audiobooks/python-zero-to-hero.html"
      },
      {
        id: "ab-healing-code-fr",
        title: "Le Code de Guérison de la Nature (Édition Audio)",
        authors: "Guillaume Lessard, Cynthia Martineau",
        year: 2024,
        language: "fr",
        categories: ["Health & Wellness"],
        description: "Exploration francophone des fréquences naturelles et de l'auto-guérison. Version audio complète.",
        image: "/assets/img/placeholders/card-portrait-384x576.webp",
        infoLink: "https://books.google.com/books?id=healing-code-fr-audio",
        isAudiobook: true,
        localUrl: "/audiobooks/le-code-de-guerison.html"
      },
      {
        id: "ab-producer-workflow",
        title: "Music Producer Workflow (Audiobook)",
        authors: "Guillaume Lessard",
        year: 2025,
        language: "en",
        categories: ["Music"],
        description: "Studio and live performance workflows powered by AI tools. Narrated by the author with musical examples.",
        image: "/assets/img/placeholders/card-portrait-384x576.webp",
        infoLink: "https://books.google.com/books?id=producer-workflow-audio",
        isAudiobook: true,
        localUrl: "/audiobooks/music-producer-workflow.html"
      },
      {
        id: "ab-ai-automation",
        title: "AI Automation for Creators (Audiobook)",
        authors: "Guillaume Lessard",
        year: 2025,
        language: "en",
        categories: ["Technology"],
        description: "Complete guide to automating creative workflows with artificial intelligence. Perfect for content creators.",
        image: "/assets/img/placeholders/card-portrait-384x576.webp",
        infoLink: "https://books.google.com/books?id=ai-automation-audio",
        isAudiobook: true,
        localUrl: "/audiobooks/ai-automation.html"
      }
    ];

    // Utility functions
    function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }
    
    function escapeHtml(str) {
      const div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    }

    async function fetchWithTimeout(url, opts = {}, timeout = CONFIG.TIMEOUT) {
      const ctrl = new AbortController();
      const id = setTimeout(() => ctrl.abort(), timeout);
      try {
        return await fetch(url, { ...opts, signal: ctrl.signal, cache: 'no-store' });
      } finally {
        clearTimeout(id);
      }
    }

    // Enhanced audiobook detection
    function isAudiobook(volumeInfo) {
      const title = `${volumeInfo.title || ''} ${volumeInfo.subtitle || ''}`.toLowerCase();
      const categories = (volumeInfo.categories || []).join(' ').toLowerCase();
      const description = (volumeInfo.description || '').toLowerCase();
      const authors = (volumeInfo.authors || []).join(' ').toLowerCase();
      const publisher = (volumeInfo.publisher || '').toLowerCase();
      
      // Comprehensive audio keywords
      const audioKeywords = [
        'audiobook', 'audio book', 'audio-book', 'audiobooks',
        'spoken word', 'spoken-word', 'spokenword',
        'narrated', 'narrator', 'narrators', 'narration',
        'unabridged', 'abridged', 'full-length', 'full length',
        'voice', 'voiced', 'voiceover', 'voice-over',
        'audio', 'audible', 'listening', 'listen',
        'recording', 'recorded', 'sound', 'audio edition',
        'audio version', 'audio-version', 'audioversion',
        'mp3', 'cd', 'cds', 'disc', 'discs',
        'playaway', 'playaway audiobook',
        'talking book', 'talking-book', 'talkingbook',
        'read aloud', 'read-aloud', 'readaloud',
        'performance', 'performed', 'performer',
        'dramatization', 'dramatized', 'drama',
        'theatrical', 'theater', 'theatre',
        'podcast', 'podcasts', 'episode', 'episodes',
        'lecture', 'lectures', 'lecturer', 'lecturing',
        'sermon', 'sermons', 'preaching', 'preacher',
        'storytelling', 'story-telling', 'storyteller',
        'oral', 'orally', 'verbal', 'verbally',
        'acoustic', 'acoustics', 'soundtrack', 'sound track',
        'music', 'musical', 'score', 'scoring',
        'radio', 'radio drama', 'radio play',
        'broadcast', 'broadcasting', 'broadcasted',
        'streaming', 'stream', 'streamed',
        'download', 'downloadable', 'digital audio',
        'digital-audio', 'digitalaudio'
      ];

      // Check for audio keywords in various fields
      const hasAudioKeyword = audioKeywords.some(keyword => 
        title.includes(keyword) || 
        categories.includes(keyword) || 
        description.includes(keyword) ||
        authors.includes(keyword) ||
        publisher.includes(keyword)
      );

      // Additional checks for specific patterns
      const hasAudioPattern = 
        /audio\s*(book|edition|version|format)/i.test(title) ||
        /(unabridged|abridged)\s*(audio|edition|version)/i.test(title) ||
        /(narrated|read)\s*by/i.test(description) ||
        /(audio|spoken)\s*(narrator|reader)/i.test(description) ||
        /(listening|audible)\s*(book|edition|version)/i.test(description) ||
        /(cd|disc|mp3|audio)\s*(book|edition|version)/i.test(title) ||
        /(playaway|talking)\s*(book|audiobook)/i.test(title);

      // Check if it's from Guillaume Lessard or iD01t Productions (likely audiobooks)
      const isFromTargetAuthor = authors.includes('guillaume lessard') || 
                                publisher.includes('id01t productions') ||
                                publisher.includes('id01t');

      // Return true if it has audio keywords, patterns, or is from target author/publisher
      return hasAudioKeyword || hasAudioPattern || isFromTargetAuthor;
    }

    // Normalize book data
    function normalizeBook(item) {
      const volumeInfo = item.volumeInfo || {};
      const imageLinks = volumeInfo.imageLinks || {};

      // Handle Google Books images with CORS issues
      let imageUrl = imageLinks.thumbnail || imageLinks.smallThumbnail || '/assets/img/placeholders/card-portrait-384x576.webp';
      
      // For Google Books images, use a CORS proxy or fallback to placeholder
      if (imageUrl.includes('books.google.com')) {
        // Use a CORS proxy service for Google Books images
        const bookId = item.id;
        if (bookId) {
          // Try multiple approaches for getting the image
          const originalUrl = imageLinks.thumbnail || imageLinks.smallThumbnail;
          if (originalUrl) {
            // Use a CORS proxy
            imageUrl = `https://images.weserv.nl/?url=${encodeURIComponent(originalUrl)}&w=400&h=600&fit=cover`;
          } else {
            // Fallback to placeholder
            imageUrl = '/assets/img/placeholders/card-portrait-384x576.webp';
          }
        } else {
          imageUrl = '/assets/img/placeholders/card-portrait-384x576.webp';
        }
      }
      
      imageUrl = imageUrl.replace('http://', 'https://');
      
      return {
        id: item.id,
        title: volumeInfo.title || 'Untitled',
        authors: (volumeInfo.authors || []).join(', '),
        year: parseInt((volumeInfo.publishedDate || '').slice(0, 4)) || null,
        language: volumeInfo.language || 'en',
        categories: volumeInfo.categories || [],
        description: volumeInfo.description || '',
        image: imageUrl,
        infoLink: (volumeInfo.infoLink || volumeInfo.canonicalVolumeLink || '#').replace('http://', 'https://'),
        isAudiobook: isAudiobook(volumeInfo),
        localUrl: null
      };
    }

    // Create book card HTML
    function createCard(book) {
      const categories = [
        book.language,
        ...(book.categories || []).slice(0, 1),
        book.isAudiobook ? 'Audiobook' : 'Book'
      ].filter(Boolean);

      const linkUrl = book.localUrl || book.infoLink;
      const linkText = book.localUrl ? 'Details' : 'Google Books';
      const linkTarget = book.localUrl ? '_self' : '_blank';
      const linkRel = book.localUrl ? 'noopener' : 'noopener nofollow';

      return `
        <article class="group rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden bg-white dark:bg-slate-900 flex flex-col hover:shadow-xl hover:shadow-brand-500/10 dark:hover:shadow-brand-400/10 transition-all duration-300 hover:-translate-y-1">
          <div class="relative overflow-hidden">
            <img src="${book.image}" 
                 alt="${escapeHtml(book.title)} cover" 
                 class="w-full aspect-[3/4] object-cover transition-transform duration-300 group-hover:scale-105" 
                 loading="lazy"
                 onerror="this.onerror=null;this.src='/assets/img/placeholders/card-portrait-384x576.webp'">
            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            ${book.isAudiobook ? '<div class="absolute top-3 right-3 bg-brand-600 text-white text-xs font-semibold px-3 py-1.5 rounded-full shadow-lg backdrop-blur-sm">🎧 Audio</div>' : ''}
            <div class="absolute bottom-3 left-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <div class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg p-2">
                <p class="text-xs text-slate-600 dark:text-slate-400 line-clamp-2">${escapeHtml(book.description || '')}</p>
              </div>
            </div>
          </div>
          <div class="p-6 flex-1 flex flex-col">
            <div class="mb-3">
              <h3 class="text-lg font-bold text-slate-900 dark:text-slate-100 leading-tight mb-2 line-clamp-2 group-hover:text-brand-600 dark:group-hover:text-brand-400 transition-colors">
                ${escapeHtml(book.title)}
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-400 font-medium">${escapeHtml(book.authors || '')}</p>
            </div>
            
            <div class="mb-4 flex flex-wrap gap-2">
              ${categories.map(cat => 
                `<span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700">${escapeHtml(cat)}</span>`
              ).join('')}
            </div>
            
            <div class="mt-auto pt-4 border-t border-slate-100 dark:border-slate-800">
              <div class="flex items-center justify-between gap-3">
                <div class="flex items-center gap-2">
                  <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                  </svg>
                  <span class="text-sm font-medium text-slate-500 dark:text-slate-400">${book.year || 'N/A'}</span>
                </div>
              <div class="flex items-center gap-2">
                <a href="${linkUrl}" target="${linkTarget}" rel="${linkRel}" 
                     class="inline-flex items-center gap-2 px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md">
                    ${linkText}
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                    </svg>
                  </a>
                  ${book.localUrl ? `<a href="${book.infoLink}" target="_blank" rel="noopener nofollow" class="text-sm text-slate-500 hover:text-brand-600 dark:text-slate-400 dark:hover:text-brand-400 transition-colors underline">Google Books</a>` : ''}
                </div>
              </div>
            </div>
          </div>
        </article>
      `;
    }

    // Apply filters
    function applyFilters(books) {
      const searchText = (document.getElementById('q').value || '').toLowerCase().trim();
      const selectedLanguage = document.getElementById('language').value;
      const fromYear = parseInt(document.getElementById('from').value) || null;
      const toYear = parseInt(document.getElementById('to').value) || null;
      const sortBy = document.getElementById('sort').value;

      let filtered = books.filter(book => {
        if (searchText) {
          const searchableText = [book.title, book.authors, book.description, (book.categories || []).join(' ')].join(' ').toLowerCase();
          if (!searchableText.includes(searchText)) return false;
        }
        if (selectedLanguage && book.language !== selectedLanguage) return false;
        if (fromYear && (!book.year || book.year < fromYear)) return false;
        if (toYear && (!book.year || book.year > toYear)) return false;
        return book.isAudiobook;
      });

      // Sort results
      filtered.sort((a, b) => {
        switch (sortBy) {
          case 'date_asc': return (a.year || 0) - (b.year || 0);
          case 'title_asc': return a.title.localeCompare(b.title);
          case 'title_desc': return b.title.localeCompare(a.title);
          default: return (b.year || 0) - (a.year || 0);
        }
      });

      return filtered;
    }

    // Render books
    function renderBooks(filtered, allBooks) {
      const loading = document.getElementById('loading');
      const grid = document.getElementById('grid');
      const empty = document.getElementById('empty');
      const count = document.getElementById('count');
      const tally = document.getElementById('tally');

      loading.classList.add('hidden');
      
      if (!filtered.length) {
        grid.classList.add('hidden');
        empty.classList.remove('hidden');
        count.textContent = '0 audiobooks';
        return;
      }

      empty.classList.add('hidden');
      grid.classList.remove('hidden');
      grid.innerHTML = filtered.map(createCard).join('');
      
      const audiobookCount = allBooks.filter(book => book.isAudiobook).length;
      count.textContent = `${filtered.length} audiobook${filtered.length !== 1 ? 's' : ''}`;
      tally.textContent = `${allBooks.length} titles • ${audiobookCount} audiobooks`;
    }

    // Populate language filter
    function populateLanguages(books) {
      const language = document.getElementById('language');
      const languages = [...new Set(books.map(book => book.language).filter(Boolean))].sort();
      language.innerHTML = '<option value="">All languages</option>' +
        languages.map(lang => `<option value="${lang}">${lang}</option>`).join('');
    }

    // Setup event listeners
    function setupEventListeners(allBooks) {
      const updateResults = () => renderBooks(applyFilters(allBooks), allBooks);
      
      ['input', 'change'].forEach(eventType => {
        ['q', 'language', 'from', 'to', 'sort'].forEach(id => {
          const element = document.getElementById(id);
          if (element) {
            element.addEventListener(eventType, updateResults);
          }
        });
      });

      const resetBtn = document.getElementById('reset');
      if (resetBtn) {
        resetBtn.addEventListener('click', () => {
          document.getElementById('q').value = '';
          document.getElementById('language').value = '';
          document.getElementById('from').value = '';
          document.getElementById('to').value = '';
          document.getElementById('sort').value = 'date_desc';
        updateResults();
      });
    }

      const refreshBtn = document.getElementById('refresh');
      if (refreshBtn) {
        refreshBtn.addEventListener('click', () => {
          localStorage.removeItem('id01t_audiobooks_cache');
          init();
        });
      }
    }

    // Enhanced search queries for comprehensive audiobook discovery
    const SEARCH_QUERIES = [
      `inauthor:"${CONFIG.AUTHOR}"`,
      `inpublisher:"${CONFIG.PUBLISHER}"`,
      `"${CONFIG.AUTHOR}" audiobook`,
      `"${CONFIG.AUTHOR}" audio book`,
      `"${CONFIG.AUTHOR}" narrated`,
      `"${CONFIG.PUBLISHER}" audiobook`,
      `"${CONFIG.PUBLISHER}" audio book`,
      `"${CONFIG.PUBLISHER}" narrated`,
      `"Guillaume Lessard" "spoken word"`,
      `"iD01t Productions" "spoken word"`,
      `"Guillaume Lessard" "unabridged"`,
      `"iD01t Productions" "unabridged"`,
      `"Guillaume Lessard" "abridged"`,
      `"iD01t Productions" "abridged"`
    ];

    // Fetch from Google Books API with multiple search strategies
    async function fetchFromGoogleBooks() {
      let allItems = [];
      const seenIds = new Set();

      // Process each search query
      for (const query of SEARCH_QUERIES) {
        try {
          console.log(`🔍 Searching: ${query}`);
          const queryResults = await fetchBooksForQuery(query);
          
          // Add unique items only
          queryResults.forEach(item => {
            if (!seenIds.has(item.id)) {
              seenIds.add(item.id);
              allItems.push(item);
            }
          });
          
          console.log(`✅ Found ${queryResults.length} new items (${allItems.length} total)`);
          
          // Small delay between queries to avoid rate limiting
          await sleep(200);
        } catch (error) {
          console.warn(`Query "${query}" failed:`, error);
        }
      }

      console.log(`📚 Total unique books found: ${allItems.length}`);
      return allItems;
    }

    // Fetch books for a specific query
    async function fetchBooksForQuery(query) {
      const items = [];

      for (let page = 0; page < CONFIG.MAX_PAGES; page++) {
        const start = page * CONFIG.PAGE_SIZE;
        const params = new URLSearchParams({
          q: query,
          maxResults: CONFIG.PAGE_SIZE,
          startIndex: String(start),
          projection: 'full',
          printType: 'books',
          orderBy: 'relevance',
          key: CONFIG.API_KEY
        });

        const url = `https://www.googleapis.com/books/v1/volumes?${params.toString()}`;
        
        let success = false;
        for (let attempt = 0; attempt < CONFIG.RETRIES && !success; attempt++) {
          try {
            const response = await fetchWithTimeout(url);
            if (!response.ok) {
              if (response.status === 429) {
                // Rate limited - wait longer
                await sleep(1000 * (attempt + 1));
                continue;
              }
              throw new Error('HTTP ' + response.status);
            }
            const data = await response.json();
            const pageItems = data.items || [];
            items.push(...pageItems);
            success = true;
      } catch (error) {
            console.warn(`Query attempt ${attempt + 1} failed:`, error);
            await sleep(200 * (attempt + 1));
          }
        }

        if (!success) break;
        if (items.length < (page + 1) * CONFIG.PAGE_SIZE) break;
      }

      return items;
    }

    // Main initialization
    async function init() {
      const loading = document.getElementById('loading');
      loading.textContent = '🎧 Loading audiobooks...';
      loading.classList.remove('hidden');

      try {
        console.log('🎧 Fetching from Google Books API...');
        const rawBooks = await fetchFromGoogleBooks();
        console.log(`📚 Raw books fetched: ${rawBooks.length}`);
        
        let allBooks = rawBooks.map(normalizeBook);
        console.log(`📖 Books normalized: ${allBooks.length}`);
        
        // Log details about each book for debugging
        allBooks.forEach((book, index) => {
          console.log(`Book ${index + 1}: "${book.title}" by ${book.authors} - Audiobook: ${book.isAudiobook}`);
        });
        
        const audiobooks = allBooks.filter(b => b.isAudiobook);
        console.log(`🎧 Audiobooks identified: ${audiobooks.length}`);

        if (audiobooks.length === 0) {
          console.log('📚 No audiobooks found in API, showing ALL books from Guillaume Lessard/iD01t Productions...');
          // Mark all books as audiobooks if they're from our target author/publisher
          allBooks.forEach(book => {
            if (book.authors.toLowerCase().includes('guillaume lessard') || 
                book.authors.toLowerCase().includes('id01t')) {
              book.isAudiobook = true;
              console.log(`🎧 Marking as audiobook: "${book.title}"`);
            }
          });
          
          const newAudiobooks = allBooks.filter(b => b.isAudiobook);
          if (newAudiobooks.length === 0) {
            console.log('📚 Still no audiobooks found, using fallback data...');
            allBooks = FALLBACK_DATA;
          } else {
            console.log(`✅ Found ${newAudiobooks.length} books from Guillaume Lessard/iD01t Productions!`);
          }
        } else {
          console.log('✅ Found audiobooks from Google Books API!');
        }

        console.log(`📚 Final: ${allBooks.length} books, ${audiobooks.length} audiobooks`);
        
        populateLanguages(allBooks);
        setupEventListeners(allBooks);
        renderBooks(applyFilters(allBooks), allBooks);
        
      } catch (error) {
        console.error('❌ API failed, using fallback data:', error);
        const allBooks = FALLBACK_DATA;
        populateLanguages(allBooks);
        setupEventListeners(allBooks);
        renderBooks(applyFilters(allBooks), allBooks);
      }
    }

    // Start when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
    init();
    }
  </script>
</body>
</html>
