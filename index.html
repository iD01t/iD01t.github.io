<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iD01t Store</title>
  <meta name="description" content="Official hub for eBooks, music, and software by Guillaume Lessard and iD01t Productions.">
  <link rel="icon" href="favicon.ico">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://id01tstore.github.io/">
  <meta property="og:title" content="iD01t Store">
  <meta property="og:description" content="Official hub for eBooks, music, and software by Guillaume Lessard and iD01t Productions.">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://id01tstore.github.io/">
  <meta property="twitter:title" content="iD01t Store">
  <meta property="twitter:description" content="Official hub for eBooks, music, and software by Guillaume Lessard and iD01t Productions.">

  <link rel="stylesheet" href="css/style.css">

  <style>
    :root{
      --bg: #0b0e14;
      --fg: #e6e9ef;
      --muted: #9aa0a6;
      --accent: #6ae3ff;
      --card: #121722;
      --border: #1d2433;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
    a{color:inherit}
    /* Top Bar */
    .topbar{position:sticky;top:0;z-index:50;background:rgba(11,14,20,.85);backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--border)}
    .topbar-inner{max-width:1200px;margin:0 auto;padding:.75rem 1rem;display:flex;align-items:center;gap:1rem}
    .brand{display:flex;align-items:center;gap:.6rem;text-decoration:none}
    .brand img{width:28px;height:28px;border-radius:6px;display:block}
    .brand span{font-weight:700;letter-spacing:.3px}
    .nav{margin-left:auto;display:flex;align-items:center;gap:.75rem}
    .nav a, .nav button{padding:.5rem .8rem;border:1px solid var(--border);border-radius:.6rem;background:transparent;color:var(--fg);text-decoration:none;cursor:pointer}
    .nav a:hover, .nav button:hover{border-color:var(--accent)}
    /* Dropdown */
    .dropdown{position:relative}
    .dropdown-menu{position:absolute;right:0;top:calc(100% + .5rem);min-width:320px;max-height:60vh;overflow:auto;background:var(--card);border:1px solid var(--border);border-radius:.8rem;box-shadow:0 10px 30px rgba(0,0,0,.5);display:none;padding:.5rem}
    .dropdown.open .dropdown-menu{display:block}
    .dropdown h4{margin:.25rem .5rem .5rem;font-size:.9rem;color:var(--muted);font-weight:600}
    .file-list{list-style:none;margin:0;padding:0}
    .file-list a{display:block;padding:.55rem .6rem;border-radius:.5rem;color:var(--fg);text-decoration:none}
    .file-list a:hover{background:#0f1421;color:var(--accent)}
    .empty{padding:.75rem .6rem;color:var(--muted)}
    /* Main layout */
    main{max-width:1200px;margin:2rem auto;padding:0 1rem}
    .pill{font-size:.85rem;border:1px solid var(--border);padding:.25rem .5rem;border-radius:999px;color:var(--muted)}
    hr{margin:20px 0;border:0;border-top:1px solid var(--border)}
    footer{max-width:1200px;margin:2rem auto;padding:1rem;color:var(--muted)}
    /* Grids and cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;display:flex;flex-direction:column}
    .thumb{width:100%;aspect-ratio:16/10;object-fit:cover}
    .pad{padding:1rem}
    .title{font-size:1.05rem;margin:.2rem 0 .4rem 0}
    .meta{font-size:.9rem;color:var(--muted);margin:0}
    .cta{margin-top:auto;display:flex;gap:.5rem;padding:1rem}
    .btn{flex:1;text-align:center;border:1px solid var(--border);border-radius:.6rem;padding:.55rem .8rem;text-decoration:none}
    .btn:hover{border-color:var(--accent)}
    .section-head{display:flex;align-items:baseline;gap:.75rem}
    .section-head h3{margin:.2rem 0}
    .section-head small{color:var(--muted)}
    /* Featured */
    .featured{display:grid;grid-template-columns:320px 1fr;gap:1.5rem;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1rem;margin-bottom:2rem}
    .featured img{width:100%;height:auto;border-radius:8px}
    @media (max-width:820px){.featured{grid-template-columns:1fr}}
  </style>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "iD01t Store",
    "url": "https://id01tstore.github.io/",
    "logo": "https://id01tstore.github.io/logo.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "admin@id01t.store",
      "contactType": "Customer Service"
    }
  }
  </script>
</head>
<body>
  <!-- Top Bar -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <a class="brand" href="./" aria-label="iD01t Store, home">
        <img src="logo.png" alt="" onerror="this.style.display='none'">
        <span>iD01t Store</span>
      </a>

      <nav class="nav" role="navigation" aria-label="Primary">
        <a href="./" aria-current="page">Home</a>
        <a href="#ebooks">eBooks</a>
        <a href="#music">Music</a>
        <a href="#software">Software</a>
        <!-- Dynamic .html menu -->
        <div class="dropdown" id="pagesDropdown">
          <button type="button" aria-expanded="false" aria-controls="pagesMenu">Pages</button>
          <div class="dropdown-menu" id="pagesMenu" role="menu" aria-label="HTML file list">
            <h4>Pages in this repo</h4>
            <ul class="file-list" id="pagesList">
              <li class="empty">Scanning repo, one moment…</li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <h2>Welcome to the iD01t Store <span class="pill">Live</span></h2>
    <p>Discover fresh releases, music, and software by Guillaume Lessard and iD01t Productions.</p>

    <!-- Featured -->
    <section id="featured" class="featured" aria-label="Featured">
      <img id="featuredImg" src="" alt="Featured cover">
      <div>
        <h3 id="featuredTitle"></h3>
        <p class="meta" id="featuredMeta"></p>
        <p id="featuredDesc"></p>
        <div class="cta">
          <a id="featuredPrimary" class="btn" href="#" target="_blank" rel="noopener">View</a>
          <a id="featuredSecondary" class="btn" href="#" target="_blank" rel="noopener">Details</a>
        </div>
      </div>
    </section>

    <!-- New Releases -->
    <div class="section-head" id="ebooks"><h3>New Releases</h3><small>Hot off the press</small></div>
    <section id="new-releases-grid" class="grid" aria-label="New Releases"></section>

    <hr>

    <!-- Best Sellers -->
    <div class="section-head"><h3>Best Sellers</h3><small>Community favorites</small></div>
    <section id="best-sellers-grid" class="grid" aria-label="Best Sellers"></section>

    <hr>

    <!-- Music -->
    <div id="music" class="section-head"><h3>Music</h3><small>Official albums and videos</small></div>
    <section id="music-grid" class="grid" aria-label="Music"></section>

    <hr>

    <!-- Software -->
    <div id="software" class="section-head"><h3>Software</h3><small>Apps and tools</small></div>
    <section id="software-grid" class="grid" aria-label="Software"></section>
  </main>

  <footer>
    <small>&copy; <span id="y"></span> iD01t Productions, all rights reserved.</small>
  </footer>

  <!-- Inline JS -->
  <script>
    // Config for GitHub API
    const GH_OWNER = "iD01t";
    const GH_REPO  = "iD01t.github.io";
    const BRANCH   = "main";

    // Dropdown toggle for pages
    (function(){
      const dd = document.getElementById("pagesDropdown");
      const btn = dd.querySelector("button");
      btn.addEventListener("click", () => {
        const open = dd.classList.toggle("open");
        btn.setAttribute("aria-expanded", String(open));
      });
      document.addEventListener("click", (e) => {
        if(!dd.contains(e.target)) {
          dd.classList.remove("open");
          btn.setAttribute("aria-expanded","false");
        }
      });
    })();

    // Discover .html files from repo (excluding index and partials)
    async function loadPages(){
      const list = document.getElementById("pagesList");
      list.innerHTML = '<li class="empty">Scanning repo, one moment…</li>';
      try{
        const url = `https://api.github.com/repos/${GH_OWNER}/${GH_REPO}/git/trees/${BRANCH}?recursive=1`;
        const res = await fetch(url, { headers: { "Accept": "application/vnd.github+json" }});
        if(!res.ok) throw new Error("GitHub API error: " + res.status);
        const data = await res.json();
        const files = (data.tree || []).filter(n => n.type === "blob" && /\.html$/i.test(n.path));
        const filtered = files.filter(f => !/index\.html$/i.test(f.path) && !/^(_|\.)/.test(f.path.split("/").pop()));
        if(!filtered.length){
          list.innerHTML = '<li class="empty">No pages found.</li>';
          return;
        }
        const frag = document.createDocumentFragment();
        filtered.sort((a,b)=>a.path.localeCompare(b.path));
        filtered.forEach(file => {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = `/${encodeURI(file.path)}`;
          a.textContent = file.path;
          li.appendChild(a);
          frag.appendChild(li);
        });
        list.innerHTML = "";
        list.appendChild(frag);
      }catch(err){
        console.error(err);
        list.innerHTML = '<li class="empty">Could not load pages.</li>';
      }
    }

    // Data for products
    const DATA = {
      featured: {
        img: "https://books.google.com/books/content?id=0Yo2EQAAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
        title: "Before the storm",
        meta: "eBook",
        desc: "Investigative journalist Olivia Grant uncovers a high-stakes conspiracy tied to corporate corruption and environmental destruction, leading to forbidden romance and a fight for truth.",
        primary: { href: "product.html?id=0Yo2EQAAQBAJ", label: "View" },
        secondary: { href: "https://play.google.com/store/books/details?id=0Yo2EQAAQBAJ", label: "Google Books" }
      },
      newReleases: [
        {
          img: "https://books.google.com/books/content?id=FA5EQAAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "To the Top of the Mountain",
          meta: "eBook",
          desc: "A journey of health, wellness, and adventure as climbers push their limits while exploring the intersection of nature and personal growth.",
          links: [{href:"product.html?id=FA5EQAAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=H_A4EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "The Architect's Legacy",
          meta: "eBook",
          desc: "A struggle for freedom in a dystopian world where architects fight against oppression and hidden agendas to reclaim their future.",
          links: [{href:"product.html?id=H_A4EQAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=Rvk5EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "Windows Zero to Hero",
          meta: "eBook",
          desc: "Master Windows and transition from novice to expert with this comprehensive, step-by-step guide.",
          links: [{href:"product.html?id=Rvk5EQAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=kY09EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "AI Today: Transforming Lives and Industries for the Future",
          meta: "eBook",
          desc: "Explore how artificial intelligence reshapes healthcare, education, business, and society, unlocking new possibilities.",
          links: [{href:"product.html?id=kY09EQAQBAJ",label:"View"}]
        }
      ],
      bestSellers: [
        {
          img: "https://books.google.com/books/content?id=Kwo4EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "Echoes of the Heart",
          meta: "eBook",
          desc: "Investigative journalist Olivia Bennett faces a dangerous investigation while falling for enigmatic attorney Jack Hawthorne in this romantic thriller.",
          links: [{href:"product.html?id=Kwo4EQAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=QQo4EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "Echoes of Truth",
          meta: "eBook",
          desc: "Claire Mitchell uncovers a dangerous web of lies linking her husband to powerful figures, embarking on a journey of mystery, betrayal, and redemption.",
          links: [{href:"product.html?id=QQo4EQAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=Iwo4EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "Intersection: The Moment Their Paths Crossed",
          meta: "eBook",
          desc: "Investigative journalist Olivia Bennett and attorney Jack Hawthorne find their lives intersected by a dangerous conspiracy in this thriller about courage, love, and sacrifice.",
          links: [{href:"product.html?id=Iwo4EQAQBAJ",label:"View"}]
        },
        {
          img: "https://books.google.com/books/content?id=OQo4EQAQBAJ&printsec=frontcover&img=1&zoom=2&edge=curl&source=gbs_api",
          title: "Legacy of Shadows",
          meta: "eBook",
          desc: "Olivia Bennett and Jack Hawthorne confront deception and global conspiracies as their love is tested by betrayal and sinister forces.",
          links: [{href:"product.html?id=OQo4EQAQBAJ",label:"View"}]
        }
      ],
      music: [
        {
          img: "assets/covers/final-transmission.jpg",
          title: "Final Transmission",
          meta: "Album, 13 tracks",
          desc: "Thirteen tracks of cinematic electronica, official music video series included.",
          links: [
            {href:"https://open.spotify.com/album/placeholder",label:"Listen"},
            {href:"https://youtube.com/playlist?list=placeholder",label:"Watch"}
          ]
        },
        {
          img: "assets/covers/no-master-needed.jpg",
          title: "No Master Needed",
          meta: "Album",
          desc: "Industrial, techno, and story-driven soundscapes.",
          links: [{href:"https://youtube.com/playlist?list=placeholder",label:"Watch"}]
        }
      ],
      software: [
        {
          img: "assets/covers/py2win.jpg",
          title: "Py2Win",
          meta: "Windows Packaging",
          desc: "Turn Python apps into polished Windows installers, documented for Microsoft Store.",
          links: [
            {href:"https://github.com/iD01tStore/Py2win/releases",label:"Releases"},
            {href:"https://github.com/iD01tStore/Py2win",label:"GitHub"}
          ]
        },
        {
          img: "assets/covers/quote-forge-ai.jpg",
          title: "QuoteForgeAI",
          meta: "Desktop App",
          desc: "AI powered contract and quote builder with PDF export and desktop support.",
          links: [{href:"#",label:"Download"}]
        },
        {
          img: "assets/covers/ra7-conscious-creator.jpg",
          title: "RA 7 Conscious Creator",
          meta: "Creator System",
          desc: "Autonomous content engine with book builder, chart dashboard, and report generator.",
          links: [{href:"#",label:"Download"}]
        }
      ]
    };

    // Helper: create elements
    function el(tag, attrs={}, children=[]){
      const e = document.createElement(tag);
      Object.entries(attrs).forEach(([k,v]) => {
        if(k === "class") e.className = v;
        else if(k.startsWith("on") && typeof v === "function") e.addEventListener(k.slice(2), v);
        else if(k === "html") e.innerHTML = v;
        else e.setAttribute(k,v);
      });
      children.forEach(c => e.appendChild(typeof c === "string" ? document.createTextNode(c) : c));
      return e;
    }

    // Card builder
    function card(item){
      const img = el("img", {class:"thumb", src:item.img, alt:item.title, loading:"lazy"});
      const title = el("div", {class:"title"}, [item.title]);
      const meta = el("p", {class:"meta"}, [item.meta]);
      const desc = el("p", {}, [item.desc]);
      const cta = el("div", {class:"cta"}, (item.links||[]).map(l => el("a",{class:"btn",href:l.href,target:"_blank"},[l.label])));
      return el("article", {class:"card"}, [img, el("div",{class:"pad"},[title, meta, desc]), cta]);
    }

    // Render grid
    function renderGrid(id, items){
      const root = document.getElementById(id);
      root.innerHTML = "";
      items.forEach(it => root.appendChild(card(it)));
    }

    // Render featured
    function renderFeatured(f){
      const img = document.getElementById("featuredImg");
      const title = document.getElementById("featuredTitle");
      const meta = document.getElementById("featuredMeta");
      const desc = document.getElementById("featuredDesc");
      const primary = document.getElementById("featuredPrimary");
      const secondary = document.getElementById("featuredSecondary");
      img.src = f.img;
      title.textContent = f.title;
      meta.textContent = f.meta;
      desc.textContent = f.desc;
      primary.href = f.primary.href;
      primary.textContent = f.primary.label;
      secondary.href = f.secondary.href;
      secondary.textContent = f.secondary.label;
    }

    // Init
    function init(){
      loadPages();
      renderFeatured(DATA.featured);
      renderGrid("new-releases-grid", DATA.newReleases);
      renderGrid("best-sellers-grid", DATA.bestSellers);
      renderGrid("music-grid", DATA.music);
      renderGrid("software-grid", DATA.software);
      document.getElementById("y").textContent = new Date().getFullYear();
    }
    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
