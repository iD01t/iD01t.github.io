<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apps • iD01t Productions</title>
  <meta name="description" content="All iD01t Productions apps & tools — pulled from itch.io with smart filters and pro CTAs." />
  <link rel="canonical" href="/apps.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Apps • iD01t Productions" />
  <meta property="og:description" content="Explore creative tools and utilities by iD01t Productions. Download on itch.io." />
  <meta property="og:url" content="/apps.html" />
  <meta property="og:image" content="/assets/img/brand/ebooks_og.jpg" />
  <link rel="icon" href="/assets/favicon.ico" />
  <link rel="apple-touch-icon" href="/assets/logo-512.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root{--border:rgba(255,255,255,.12);--card:rgba(255,255,255,.06);--muted:rgba(255,255,255,.75)}
    @media (prefers-color-scheme: light){:root{--border:rgba(0,0,0,.12);--card:rgba(0,0,0,.03);--muted:#6b7280}}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#0b0d10;color:#eaeaf0}
    @media (prefers-color-scheme: light){body{background:#fff;color:#0f172a}}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}
    .hero{padding:56px 0;background:linear-gradient(135deg,#111827 0%,#0b0d10 60%,#0b0d10 100%)}
    .hero h1{font-size:clamp(28px,4vw,44px);margin:0 0 8px}
    .hero p{opacity:.85;margin:0}
    .toolbar{display:grid;grid-template-columns:1.2fr 200px 200px 200px 1fr;gap:10px;align-items:end;margin:18px 0}
    .toolbar label{font-size:.85rem;color:var(--muted);display:block;margin-bottom:6px}
    .toolbar input,.toolbar select{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:inherit}
    .btn{display:inline-block;padding:10px 12px;border:1px solid var(--border);border-radius:12px;text-decoration:none;color:inherit;background:rgba(255,255,255,.03)}
    .btn:hover{filter:brightness(1.07)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
    .card{border:1px solid var(--border);border-radius:16px;overflow:hidden;background:var(--card)}
    .tile img{width:100%;aspect-ratio:16/9;object-fit:cover;background:#111}
    .tile .content{padding:14px;display:flex;flex-direction:column;gap:10px}
    .chip{font-size:.8rem;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06)}
    .muted{opacity:.8}
    .section{padding:16px;border:1px solid var(--border);border-radius:16px;margin-bottom:16px;background:var(--card)}
    iframe.itch{width:100%;max-width:552px;height:167px;border:0}
    footer{border-top:1px solid var(--border);padding:24px 0;margin-top:32px;opacity:.8;text-align:center}
  </style>
</head>
<body data-active="Apps">
  <div id="header-slot"></div>

  <section class="hero">
    <div class="wrap">
      <h1>Apps — iD01t Productions</h1>
      <p>Creative tools & utilities by Guillaume Lessard / iD01t Productions. Download on itch.io.</p>
    </div>
  </section>

  <main class="wrap" role="main">
    <!-- Filters -->
    <section class="toolbar" aria-label="Filters">
      <div>
        <label for="q">Search</label>
        <input id="q" type="search" placeholder="Title, keyword" />
      </div>
      <div>
        <label for="platform">Platform</label>
        <select id="platform">
          <option value="">All</option>
          <option value="windows">Windows</option>
          <option value="linux">Linux</option>
          <option value="osx">macOS</option>
          <option value="android">Android</option>
          <option value="html5">Web (HTML5)</option>
        </select>
      </div>
      <div>
        <label for="price">Price</label>
        <select id="price">
          <option value="">All</option>
          <option value="free">Free</option>
          <option value="paid">Paid</option>
        </select>
      </div>
      <div>
        <label for="sort">Sort</label>
        <select id="sort">
          <option value="new">Newest</option>
          <option value="az">A–Z</option>
          <option value="price">Lowest price</option>
        </select>
      </div>
      <div style="display:flex;align-items:center;gap:10px;justify-content:flex-end">
        <button id="clear" class="btn" type="button">Clear filters</button>
        <span id="tally" class="muted"></span>
      </div>
    </section>

    <!-- Featured embeds -->
    <section class="section" aria-label="Featured on itch.io">
      <h2 style="margin:0 0 10px">Featured on itch.io</h2>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px">
        <iframe class="itch" src="https://itch.io/embed/3833174?linkback=true&border_width=4&dark=true"><a href="https://id01t.itch.io/bedtime-story-maker-windows-app">Bedtime Story Maker Windows App by iD01t Productions</a></iframe>
        <iframe class="itch" src="https://itch.io/embed/3843458?linkback=true&border_width=4&dark=true"><a href="https://id01t.itch.io/py2win">Py2Win FREE by iD01t Productions</a></iframe>
      </div>
    </section>

    <!-- Catalog -->
    <section aria-label="Apps catalog">
      <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0 14px">
        <h2 style="margin:0">All Apps & Tools</h2>
        <span id="count" class="muted" style="font-size:.9rem"></span>
      </div>
      <div id="grid" class="grid" aria-live="polite"></div>
      <div id="empty" class="muted" hidden>No apps found. Try different filters.</div>
    </section>

    <!-- Itch profile fallback -->
    <section class="section" id="fallback" hidden>
      <h3 style="margin:0 0 8px">Can’t load catalog? Browse on itch.io</h3>
      <p class="muted" style="margin:0 0 12px">We couldn’t load the local mirror file. Use the official profile instead.</p>
      <a class="btn" href="https://id01t.itch.io/" target="_blank" rel="noopener">Open id01t.itch.io</a>
    </section>
  </main>

  <div id="footer-slot"></div>

  <!-- Inject header/footer from the ORIGINAL homepage -->
  <script>
  (async function injectLayout(){
    try{
      const res = await fetch('/index.html', {cache:'no-store'});
      const text = await res.text();
      const doc = new DOMParser().parseFromString(text, 'text/html');
      const head = document.querySelector('head');
      doc.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
        const href = link.getAttribute('href');
        if (href && !document.querySelector('link[rel="stylesheet"][href="'+href+'"]')) {
          const l=document.createElement('link'); l.rel='stylesheet'; l.href=href; head.appendChild(l);
        }
      });
      const header = doc.querySelector('header'); const footer = doc.querySelector('footer');
      if (header) document.getElementById('header-slot').innerHTML = header.outerHTML;
      if (footer) document.getElementById('footer-slot').innerHTML = footer.outerHTML;
      // Active nav
      const active = (document.body.dataset.active || '').toLowerCase();
      document.querySelectorAll('header nav a, #site-header nav a').forEach(a=>{
        a.removeAttribute('aria-current');
        const label=a.textContent.trim().toLowerCase();
        const href=a.getAttribute('href');
        if ((active && label===active) || href==='/apps.html') a.setAttribute('aria-current','page');
      });
      // Re-exec scripts in injected nodes
      ['header-slot','footer-slot'].forEach(id=>{
        const root=document.getElementById(id);
        root && root.querySelectorAll('script').forEach(s=>{const ns=document.createElement('script'); ns.textContent=s.textContent; s.replaceWith(ns);});
      });
    }catch(e){ console.warn('Header/Footer injection failed', e); }
  })();
  </script>

  <!-- Apps logic: load from itch mirror JSON and filter "tools/apps" -->
  <script>
    const el = id => document.getElementById(id);
    const $q=el('q'), $plat=el('platform'), $price=el('price'), $sort=el('sort'), $clear=el('clear'),
          $grid=el('grid'), $empty=el('empty'), $count=el('count'), $tally=el('tally'), $fallback=el('fallback');

    const esc=s=>String(s||'').replace(/[&<>"]/g,c=>({"&":"&amp;","<":"&lt;","&gt;":"&gt;","\"":"&quot;"}[c]));

    const mirrorFiles=[
      '/assets/data/itch_apps.json',       // preferred: only apps/tools
      '/assets/data/itch_catalog.json',    // alternative: full catalog (apps+games)
      '/assets/data/itch_games.json'       // legacy: games file; we'll filter tools if included
    ];

    function isTool(item){
      const t=(item.classification||'').toLowerCase(); // 'tool' or 'game' etc.
      if (t.includes('tool')) return true;
      const tags=(item.tags||[]).map(x=>String(x).toLowerCase());
      return tags.some(x=>['tool','utility','app','application'].includes(x)) || (item.type||'').toLowerCase()==='tool';
    }

    async function loadMirror(){
      for (const path of mirrorFiles){
        try{
          const r=await fetch(path,{cache:'no-store'});
          if(!r.ok) continue;
          const data=await r.json();
          const items = Array.isArray(data) ? data : (data.items||data.games||data.tools||[]);
          if(items && items.length) return items;
        }catch(e){/*try next*/}
      }
      return null;
    }

    const chip = t => `<span class="chip">${esc(t)}</span>`;

    function cardHTML(a){
      const price = (a.price||0)===0 ? 'Free' : (a.price_formatted || `${a.price||''} ${a.currency||''}`).trim();
      const tags = [
        ...(a.platforms||[]),
        price
      ].filter(Boolean).map(chip).join(' ');
      const date = (a.published_at||a.updated_at||'').slice(0,10);
      const cover = a.cover || a.cover_url || '/assets/img/placeholders/hero-1600x900.webp';
      const url = a.url || a.profile|| '#';
      const demo = a.demo_url;
      return `<article class="card tile">
        <img src="${esc(cover)}" alt="${esc(a.title)} cover">
        <div class="content">
          <div style="display:flex;justify-content:space-between;gap:10px;align-items:center">
            <h3 style="margin:0">${esc(a.title)}</h3>
            <span class="muted" style="font-size:.9rem">${esc(date)}</span>
          </div>
          <div class="muted">${esc(a.short_text||a.description||'')}</div>
          <div style="display:flex;gap:6px;flex-wrap:wrap">${tags}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn" href="${esc(url)}" target="_blank" rel="noopener nofollow">View on itch.io</a>
            ${demo ? `<a class="btn" href="${esc(demo)}" target="_blank" rel="noopener">Try demo</a>` : ''}
          </div>
        </div>
      </article>`;
    }

    function populateFilters(items){
      const plats=new Set();
      items.forEach(x=>(x.platforms||[]).forEach(p=>plats.add(p)));
      $plat.innerHTML = ['<option value=\"\">All</option>', ...Array.from(plats).sort().map(p=>`<option value=\"${p}\">${p}</option>`)].join('');
    }

    function apply(items){
      const text=($q.value||'').toLowerCase();
      const plat=$plat.value, pr=$price.value, sort=$sort.value;
      let list = items.filter(isTool).filter(a=>{
        if(text){
          const hay=[a.title,a.short_text,(a.tags||[]).join(' ')].join(' ').toLowerCase();
          if(!hay.includes(text)) return false;
        }
        if(plat && !(a.platforms||[]).includes(plat)) return false;
        if(pr==='free' && (a.price||0)>0) return false;
        if(pr==='paid' && (a.price||0)===0) return false;
        return true;
      });
      if(sort==='az') list.sort((a,b)=>a.title.localeCompare(b.title));
      else if(sort==='price') list.sort((a,b)=>(a.price||0)-(b.price||0) || a.title.localeCompare(b.title));
      else list.sort((a,b)=>new Date(b.published_at||b.updated_at||0)-new Date(a.published_at||a.updated_at||0));
      return list;
    }

    function render(list, all){
      if(!list.length){ $grid.innerHTML=''; $empty.hidden=false; $count.textContent='0 apps'; $tally.textContent=''; return; }
      $empty.hidden=true;
      $grid.innerHTML = list.map(cardHTML).join('');
      $count.textContent = `${list.length} app${list.length!==1?'s':''}`;
      const totalTools = all.filter(isTool).length;
      const freeCount = all.filter(x=>isTool(x) && (x.price||0)===0).length;
      $tally.textContent = `${totalTools} total • ${freeCount} free`;
      emitSchema(list);
    }

    function emitSchema(list){
      const ld = { '@context':'https://schema.org', '@type':'ItemList', name:'iD01t Productions Apps',
        itemListElement: list.slice(0,60).map((a,i)=>({'@type':'ListItem','position':i+1,'item':{
          '@type':'SoftwareApplication',
          name:a.title, url:a.url, image:a.cover || a.cover_url,
          applicationCategory:'DeveloperApplication',
          operatingSystem:(a.platforms||[]).join(', ') || 'Windows, macOS, Linux',
          offers:{'@type':'Offer','price':String(a.price||0),'priceCurrency':a.currency||'USD'}
        }})) };
      let tag=document.getElementById('ld-apps'); if(!tag){tag=document.createElement('script');tag.id='ld-apps';tag.type='application/ld+json';document.head.appendChild(tag);}
      tag.textContent = JSON.stringify(ld);
    }

    (async function init(){
      try{
        const items = await loadMirror();
        if(!items){ $fallback.hidden=false; $empty.hidden=false; return; }
        populateFilters(items);
        const go=()=>render(apply(items), items);
        ['input','change'].forEach(evt=>[$q,$plat,$price,$sort].forEach(e=>e.addEventListener(evt,go)));
        $clear.addEventListener('click',()=>{$q.value='';$plat.value='';$price.value='';$sort.value='new';go();});
        go();
      }catch(e){
        console.warn('Apps load failed', e); $fallback.hidden=false; $empty.hidden=false;
      }
    })();
  </script>
</body>
</html>
