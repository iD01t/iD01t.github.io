<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search - iD01t Productions</title>
  <meta name="description" content="Search through iD01t Productions' collection of eBooks, audiobooks, music, games, and apps.">
  <link rel="canonical" href="https://id01t.github.io/search.html">
  <meta name="robots" content="index,follow">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Search - iD01t Productions">
  <meta property="og:description" content="Search through iD01t Productions' collection of eBooks, audiobooks, music, games, and apps.">
  <meta property="og:url" content="https://id01t.github.io/search.html">
  <meta property="og:image" content="https://id01t.github.io/assets/img/placeholders/card-square-640.webp">

  <link rel="icon" href="/assets/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/logo-512.png">
  <link rel="stylesheet" href="/assets/site.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CHX65WY0WZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date()); gtag('config', 'G-CHX65WY0WZ');
  </script>

  <style>
    :root{--border:rgba(255,255,255,.12);--card:rgba(255,255,255,.06);--muted:rgba(255,255,255,.78)}
    @media (prefers-color-scheme: dark){body{background:#0b0d10;color:#eaeaf0}}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}
    header.sticky{position:sticky;top:0;z-index:50;background:rgba(11,13,16,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .nav a{color:inherit;text-decoration:none;margin:0 8px;opacity:.9}
    .nav a[aria-current="page"], .nav a:hover{opacity:1}
    .search-container{padding:40px 0;max-width:800px;margin:0 auto}
    .search-box{width:100%;padding:16px 20px;border:2px solid var(--border);border-radius:12px;background:var(--card);color:inherit;font-size:16px;margin-bottom:20px}
    .search-results{margin-top:20px}
    .result-item{border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px;background:var(--card)}
    .result-title{font-weight:600;margin-bottom:4px}
    .result-meta{color:var(--muted);font-size:14px;margin-bottom:8px}
    .result-description{color:var(--muted);line-height:1.5}
    .no-results{text-align:center;padding:40px;color:var(--muted)}
    .search-filters{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}
    .filter-btn{padding:6px 12px;border:1px solid var(--border);border-radius:20px;background:rgba(255,255,255,.05);color:inherit;text-decoration:none;font-size:14px}
    .filter-btn.active{background:var(--brand);color:white}
  </style>
</head>
<body data-active="Search">
  <header id="site-header" class="sticky">
    <div class="wrap nav">
      <a href="/" class="logo" aria-label="iD01t Home"><strong>iD01t</strong></a>
      <nav>
        <a href="/index.html" class="link-underline">Home</a>
        <a href="/store.html" class="link-underline">Store</a>
        <a href="/apps.html" class="link-underline">Apps</a>
        <a href="/ebooks.html" class="link-underline">eBooks</a>
        <a href="/audiobooks.html" class="link-underline">Audiobooks</a>
        <a href="/games.html" class="link-underline">Games</a>
        <a href="/music.html" class="link-underline">Music</a>
        <a href="/blog.html" class="link-underline">Blog</a>
        <a href="/about.html" class="link-underline">About</a>
        <a href="/contact.html" class="link-underline">Contact</a>
      </nav>
      <div style="display: flex; align-items: center; gap: 12px;">
        <form action="/search.html" method="GET" style="display: flex; align-items: center;">
          <input type="search" name="q" placeholder="Search..." 
                 style="padding: 6px 12px; border: 1px solid var(--border); border-radius: 20px; background: rgba(255,255,255,0.1); color: inherit; width: 200px;">
          <button type="submit" style="margin-left: 4px; padding: 6px 12px; border: 1px solid var(--border); border-radius: 20px; background: rgba(255,255,255,0.1); color: inherit; cursor: pointer;">
            üîç
          </button>
        </form>
      </div>
    </div>
  </header>

  <main class="search-container">
    <h1>Search iD01t Productions</h1>
    <p class="muted">Find eBooks, audiobooks, music, games, and apps</p>
    
    <form id="searchForm">
      <input type="search" id="searchInput" class="search-box" placeholder="Search for content..." autocomplete="off">
    </form>

    <div class="search-filters">
      <a href="#" class="filter-btn active" data-filter="all">All</a>
      <a href="#" class="filter-btn" data-filter="ebooks">eBooks</a>
      <a href="#" class="filter-btn" data-filter="audiobooks">Audiobooks</a>
      <a href="#" class="filter-btn" data-filter="music">Music</a>
      <a href="#" class="filter-btn" data-filter="games">Games</a>
      <a href="#" class="filter-btn" data-filter="apps">Apps</a>
    </div>

    <div id="searchResults" class="search-results">
      <div class="no-results">
        <h3>Start typing to search</h3>
        <p>Search through our collection of digital content</p>
      </div>
    </div>
  </main>

  <footer>
    <div class="wrap">¬© <span id="year"></span> iD01t Productions</div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');
    const filterBtns = document.querySelectorAll('.filter-btn');
    
    let currentFilter = 'all';
    let searchData = [];

    // Load search data
    async function loadSearchData() {
      try {
        const response = await fetch('/assets/catalog.json');
        const data = await response.json();
        searchData = [
          ...(data.ebooks || []).map(item => ({...item, type: 'ebooks'})),
          ...(data.audiobooks || []).map(item => ({...item, type: 'audiobooks'})),
          ...(data.music || []).map(item => ({...item, type: 'music'})),
          ...(data.games || []).map(item => ({...item, type: 'games'})),
          ...(data.apps || []).map(item => ({...item, type: 'apps'}))
        ];
      } catch (error) {
        console.error('Failed to load search data:', error);
      }
    }

    // Filter data
    function filterData(query, type) {
      if (!query.trim()) return [];
      
      return searchData.filter(item => {
        const matchesQuery = item.title.toLowerCase().includes(query.toLowerCase()) ||
                           (item.description && item.description.toLowerCase().includes(query.toLowerCase())) ||
                           (item.author && item.author.toLowerCase().includes(query.toLowerCase()));
        const matchesType = type === 'all' || item.type === type;
        return matchesQuery && matchesType;
      });
    }

    // Render results
    function renderResults(results) {
      if (results.length === 0) {
        searchResults.innerHTML = `
          <div class="no-results">
            <h3>No results found</h3>
            <p>Try adjusting your search terms or filters</p>
          </div>
        `;
        return;
      }

      searchResults.innerHTML = results.map(item => `
        <div class="result-item">
          <div class="result-title">
            <a href="${item.link || '#'}" style="color: inherit; text-decoration: none;">
              ${item.title}
            </a>
          </div>
          <div class="result-meta">
            ${item.type.charAt(0).toUpperCase() + item.type.slice(1)} ‚Ä¢ 
            ${item.author || 'Unknown'} ‚Ä¢ 
            ${item.lang || 'EN'}
          </div>
          <div class="result-description">
            ${item.description || 'No description available'}
          </div>
        </div>
      `).join('');
    }

    // Search handler
    function handleSearch() {
      const query = searchInput.value.trim();
      const results = filterData(query, currentFilter);
      renderResults(results);
    }

    // Event listeners
    searchInput.addEventListener('input', handleSearch);
    
    filterBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        handleSearch();
      });
    });

    // Load data on page load
    loadSearchData();

    // Handle URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const query = urlParams.get('q');
    if (query) {
      searchInput.value = query;
      handleSearch();
    }
  </script>
</body>
</html>
