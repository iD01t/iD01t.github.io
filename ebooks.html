<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>eBooks · iD01t Productions</title>
  <meta name="description" content="Official eBooks by iD01t Productions — developer guides, AI, creativity, and more."/>
  <link rel="icon" href="/favicon.ico"/>
  <meta name="theme-color" content="#16185c"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {50:'#f5f6ff',100:'#e6e9ff',200:'#c9ccff',300:'#a2a8ff',400:'#7a82ff',500:'#545cff',600:'#3a3fe6',700:'#2c30b4',800:'#202383',900:'#16185c'}
          }
        }
      }
    };
  </script>
  <link rel="stylesheet" href="/css/custom.css">
  <style>
    .link-underline { position: relative; }
    .link-underline::after { content:''; position:absolute; left:0; bottom:-2px; width:100%; height:1px; background: currentColor; transform:scaleX(0); transform-origin:left; transition: transform .2s; }
    .link-underline:hover::after { transform:scaleX(1); }
  </style>
  <script>(function(){const s=localStorage.getItem('theme');const d=matchMedia('(prefers-color-scheme: dark)').matches;if(s==='dark'||(!s&&d))document.documentElement.classList.add('dark');})();</script>
</head>
<body class="bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100">
  <!-- Header copied from games.html -->
  
  <header class="sticky top-0 z-50 backdrop-blur supports-backdrop-blur:bg-white/70 bg-white/70 dark:bg-slate-950/60 border-b border-slate-200/60 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="/" class="flex items-center gap-2" aria-label="Home">
          <img src="/assets/img/brand/logo.png" class="h-8 w-8" alt="iD01t Productions">
          <span class="font-semibold tracking-tight">iD01t Productions</span>
        </a>
        <nav class="hidden md:flex items-center gap-6" aria-label="Primary">
          <a href="/store.html" class="link-underline">Store</a> <a href="/ebooks.html" class="link-underline text-brand-600 dark:text-brand-400">eBooks</a> <a href="/audiobooks.html" class="link-underline">Audiobooks</a> <a href="/apps.html" class="link-underline">Apps</a> <a href="/games.html" class="link-underline">Games</a> <a href="/music.html" class="link-underline">Music</a> <a href="/blog.html" class="link-underline">Blog</a> <a href="/about.html" class="link-underline">About</a> <a href="/contact.html" class="link-underline">Contact</a>
        </nav>
        <div class="flex items-center gap-3">
          <button id="themeToggle" class="rounded-full border border-slate-300 dark:border-slate-700 px-3 py-1 text-sm">Theme</button>
          <a href="/#newsletter" class="inline-flex items-center rounded-full bg-brand-600 hover:bg-brand-700 text-white text-sm px-4 py-2">Newsletter</a>
          <button id="mobileMenuBtn" class="md:hidden inline-flex items-center justify-center p-2 rounded-lg border border-slate-300 dark:border-slate-700" aria-label="Open menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M3 12h18M3 18h18"/></svg>
          </button>
        </div>
      </div>
    </div>
    <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 dark:border-slate-800" role="dialog" aria-modal="true">
      <div class="px-4 py-3 flex flex-col gap-2">
        <a href="/store.html" class="py-2">Store</a><a href="/ebooks.html" class="py-2">eBooks</a><a href="/audiobooks.html" class="py-2">Audiobooks</a><a href="/apps.html" class="py-2">Apps</a><a href="/games.html" class="py-2">Games</a><a href="/music.html" class="py-2">Music</a><a href="/blog.html" class="py-2">Blog</a><a href="/about.html" class="py-2">About</a><a href="/contact.html" class="py-2">Contact</a>
      </div>
    </div>
  </header>
    

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-12 pb-6 text-center">
      <h1 class="text-4xl sm:text-5xl font-bold tracking-tight">eBooks</h1>
      <p class="mt-3 text-slate-600 dark:text-slate-300">Guides for developers and creators. Clear steps, real examples, fast results.</p>
      <p class="mt-1 text-xs text-slate-500">Catalog auto-populated from Google Books • Last updated: September 06, 2025</p>
    </div>
  </section>

  <!-- Filters + Grid -->
  <main class="py-8 border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <!-- Controls -->
      <div class="bg-slate-50 dark:bg-slate-900/40 rounded-2xl p-4 mb-6 flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
        <div class="flex gap-2 items-center">
          <label class="text-sm">Search</label>
          <input id="q" type="search" placeholder="Title, keyword…" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 w-64">
        </div>
        <div class="flex gap-2 items-center">
          <label class="text-sm">Sort</label>
          <select id="sort" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2">
            <option value="newest">Newest</option>
            <option value="title">Title A–Z</option>
            <option value="priceAsc">Price ↑</option>
            <option value="priceDesc">Price ↓</option>
          </select>
          <button id="resetBtn" class="rounded-full border border-slate-300 dark:border-slate-700 px-4 py-2 text-sm">Reset</button>
        </div>
      </div>

      <!-- Grid -->
      <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

      <div id="loadMoreWrap" class="flex justify-center mt-8">
        <button id="loadMore" class="hidden rounded-full bg-brand-600 hover:bg-brand-700 text-white px-6 py-3">Load more</button>
      </div>
    </div>
  </main>

  <!-- Footer copied from games.html -->
  
  <footer class="py-10 border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
        <div>
          <p class="font-semibold">iD01t Productions</p>
          <p class="text-sm text-slate-500">© <span id="year"></span> All rights reserved</p>
        </div>
        <nav class="flex flex-wrap gap-4 text-sm">
          <a href="/legal/terms.html" class="link-underline">Terms</a>
          <a href="/legal/privacy.html" class="link-underline">Privacy</a>
          <a href="/legal/refunds.html" class="link-underline">Refunds</a>
          <a href="https://github.com/id01t" class="link-underline" target="_blank" rel="noopener">GitHub</a>
          <a href="https://id01t.itch.io" class="link-underline" target="_blank" rel="noopener">itch.io</a>
        </nav>
      </div>
    </div>
  </footer>


  <!-- Scripts -->
  <script>
    // Shared UI
    document.getElementById('year').textContent = new Date().getFullYear();
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', function(){
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        themeToggle.setAttribute('aria-pressed', String(isDark));
      });
    }
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    if (mobileMenuBtn && mobileMenu) {
      mobileMenuBtn.addEventListener('click', function(){
        mobileMenu.classList.toggle('hidden');
      });
    }

    // ---- Bulletproof Google Books API client ----
    const CONFIG = {
      publisher: "iD01t Productions",
      author: "Guillaume Lessard",
      langRestrict: "",
      maxPerPage: 24,
      apiKey: "", // optional: add key for higher quota
      partnerBuyBase: "https://play.google.com/store/books/details",
      utm: "utm_source=id01t_site&utm_medium=card&utm_campaign=ebooks_catalog"
    };

    const FALLBACK = [
      {
        id: "33eCEQAAQBAJ",
        title: "Understanding Your Cat’s Mind",
        subtitle: "Beyond the Veil",
        authors: ["Guillaume Lessard"],
        thumbnail: "https://books.google.com/books/publisher/content?id=33eCEQAAQBAJ&printsec=frontcover&img=1&zoom=6&edge=curl&source=gbs_api",
        description: "Explore feline consciousness and deepen your bond."
      },
      {
        id: "R4dBEQAAQBAJ",
        title: "Mastering AEO",
        subtitle: "Advanced Ecommerce Optimization",
        authors: ["Guillaume Lessard"],
        thumbnail: "https://books.google.com/books/publisher/content?id=R4dBEQAAQBAJ&printsec=frontcover&img=1&zoom=6&edge=curl&source=gbs_api",
        description: "Dominate organic discovery and conversions."
      }
    ];

    const grid = document.getElementById('grid');
    const qInput = document.getElementById('q');
    const sortSel = document.getElementById('sort');
    const loadMoreBtn = document.getElementById('loadMore');

    let state = { items: [], startIndex: 0, total: 0, query: "", loading: false };

    function buildQuery() {
      const parts = [];
      if (CONFIG.publisher) parts.push(`inpublisher:"${CONFIG.publisher}"`);
      if (CONFIG.author) parts.push(`inauthor:"${CONFIG.author}"`);
      if (state.query) parts.push(state.query);
      return parts.join(" + ");
    }

    function apiURL(startIndex=0) {
      const base = "https://www.googleapis.com/books/v1/volumes";
      const params = new URLSearchParams({
        q: buildQuery(),
        maxResults: String(Math.min(CONFIG.maxPerPage, 40)),
        startIndex: String(startIndex),
        printType: "books",
        projection: "full",
        orderBy: sortSel.value === "newest" ? "newest" : undefined,
        langRestrict: CONFIG.langRestrict || undefined,
        key: CONFIG.apiKey || undefined
      });
      [...params.keys()].forEach(k => params.get(k) === "undefined" && params.delete(k));
      return `${base}?${params.toString()}`;
    }

    function priceFromSaleInfo(saleInfo) {
      try {
        if (saleInfo && saleInfo.retailPrice) return saleInfo.retailPrice.amount;
        if (saleInfo && saleInfo.listPrice) return saleInfo.listPrice.amount;
      } catch(_){}
      return null;
    }

    function buyURL(volume) {
      const id = volume.id;
      const base = `${CONFIG.partnerBuyBase}?id=${encodeURIComponent(id)}`;
      return `${base}&${CONFIG.utm}`;
    }

    function card(v) {
      const info = v.volumeInfo || {}, sale = v.saleInfo || {};
      const title = info.title || "Untitled";
      const subtitle = info.subtitle || "";
      const authors = (info.authors || []).join(", ");
      const img = (info.imageLinks && (info.imageLinks.thumbnail || info.imageLinks.smallThumbnail)) || "";
      const desc = (info.description || "").replace(/<[^>]+>/g,"").slice(0, 650);
      const price = priceFromSaleInfo(sale);
      const link = buyURL(v);
      return `
      <article class="rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col bg-white dark:bg-slate-900">
        <img src="${img}" alt="${title}" class="w-full aspect-[3/4] object-cover">
        <div class="p-4 flex-1 flex flex-col">
          <h3 class="font-semibold leading-snug">${title}</h3>
          ${subtitle ? `<p class="text-sm text-slate-500">${subtitle}</p>` : ""}
          <p class="text-xs text-slate-500 mt-1">${authors}</p>
          <p class="text-sm text-slate-700 dark:text-slate-300 mt-3 line-clamp-6">${desc}</p>
          <div class="mt-auto pt-4 flex items-center justify-between">
            <span class="text-sm">${price !== null ? `$${price.toFixed ? price.toFixed(2) : price}` : ""}</span>
            <a href="${link}" target="_blank" rel="noopener" class="rounded-full bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 text-sm">Buy on Google Play</a>
          </div>
        </div>
      </article>`;
    }

    function cardFromFallback(fb) {
      const link = `${CONFIG.partnerBuyBase}?id=${encodeURIComponent(fb.id)}&${CONFIG.utm}`;
      return `
      <article class="rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col bg-white dark:bg-slate-900">
        <img src="${fb.thumbnail}" alt="${fb.title}" class="w-full aspect-[3/4] object-cover">
        <div class="p-4 flex-1 flex flex-col">
          <h3 class="font-semibold leading-snug">${fb.title}</h3>
          ${fb.subtitle ? `<p class="text-sm text-slate-500">${fb.subtitle}</p>` : ""}
          <p class="text-xs text-slate-500 mt-1">${(fb.authors||[]).join(", ")}</p>
          <p class="text-sm text-slate-700 dark:text-slate-300 mt-3 line-clamp-6">${fb.description||""}</p>
          <div class="mt-auto pt-4 flex items-center justify-end">
            <a href="${link}" target="_blank" rel="noopener" class="rounded-full bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 text-sm">Buy on Google Play</a>
          </div>
        </div>
      </article>`;
    }

    function render() {
      const html = state.items.map(card).join("");
      grid.innerHTML = html || FALLBACK.map(cardFromFallback).join("");
      const more = state.startIndex + CONFIG.maxPerPage < state.total;
      loadMoreBtn.classList.toggle("hidden", !more);
    }

    async function fetchPage(startIndex) {
      const url = apiURL(startIndex);
      for (let attempt = 0; attempt < 3; attempt++) {
        try {
          const res = await fetch(url, { cache: "no-store" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          const data = await res.json();
          return data;
        } catch (err) {
          await new Promise(r => setTimeout(r, 400 * (attempt+1))); // backoff
        }
      }
      throw new Error("Network/API unavailable");
    }

    async function load(reset=false) {
      if (state.loading) return;
      state.loading = true;
      try {
        if (reset) { state.startIndex = 0; state.items = []; state.total = 0; }
        const data = await fetchPage(state.startIndex);
        state.total = data.totalItems || 0;
        const items = (data.items || []).filter(v => (v.volumeInfo||{}).title);
        state.items = state.items.concat(items);
        render();
        state.startIndex += CONFIG.maxPerPage;
      } catch (e) {
        render(); // will show fallback
      } finally {
        state.loading = false;
      }
    }

    function sortClient() {
      if (!['title','priceAsc','priceDesc'].includes(sortSel.value)) return;
      const items = [...state.items];
      if (sortSel.value === 'title') items.sort((a,b) => (a.volumeInfo?.title||'').localeCompare(b.volumeInfo?.title||''));
      if (sortSel.value === 'priceAsc') items.sort((a,b) => (priceFromSaleInfo(a.saleInfo)||1e9) - (priceFromSaleInfo(b.saleInfo)||1e9));
      if (sortSel.value === 'priceDesc') items.sort((a,b) => (priceFromSaleInfo(b.saleInfo)||-1) - (priceFromSaleInfo(a.saleInfo)||-1));
      state.items = items;
      render();
    }

    qInput.addEventListener('input', () => { state.query = qInput.value.trim(); load(true); });
    sortSel.addEventListener('change', () => { if (sortSel.value === 'newest') load(true); else sortClient(); });
    document.getElementById('resetBtn').addEventListener('click', () => { qInput.value = ""; state.query = ""; sortSel.value = "newest"; load(true); });
    loadMoreBtn.addEventListener('click', () => load(false));

    // First load
    load(true);
  </script>
</body>
</html>
