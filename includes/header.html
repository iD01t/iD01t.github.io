<!--
  iD01t Productions - Shared Header Component
  Version: 2.0.0
  Last Updated: October 30, 2025

  This header should be included on all pages for consistency.
  Includes: Navigation, Theme Toggle, Language Switcher, Mobile Menu
-->

<!-- Skip to main content link for accessibility -->
<a href="#main" class="skip-link">Skip to main content</a>

<!-- Main Navigation -->
<nav role="navigation" aria-label="Main navigation" class="sticky top-0 z-50 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">

      <!-- Logo and Desktop Navigation -->
      <div class="flex items-center space-x-8">
        <!-- Logo -->
        <a href="/" aria-label="iD01t Productions home" class="flex items-center space-x-2 focus-ring rounded">
          <img
            src="/assets/img/brand/logo.svg"
            alt="iD01t Productions logo"
            class="h-8 w-8"
            width="32"
            height="32"
          >
          <span class="font-semibold text-lg text-slate-900 dark:text-white">iD01t Productions</span>
        </a>

        <!-- Desktop Navigation Links -->
        <div class="hidden md:flex items-center space-x-6">
          <a href="/store.html" class="nav-link">Store</a>
          <a href="/ebooks.html" class="nav-link">eBooks</a>
          <a href="/audiobooks.html" class="nav-link">Audiobooks</a>
          <a href="/apps.html" class="nav-link">Apps</a>
          <a href="/games.html" class="nav-link">Games</a>
          <a href="/music.html" class="nav-link">Music</a>
          <a href="/blog.html" class="nav-link">Blog</a>
          <a href="/nini.html" class="nav-link">Nini's Adventures</a>
        </div>
      </div>

      <!-- Right Side Controls -->
      <div class="flex items-center space-x-4">
        <!-- Language Switcher -->
        <div class="language-switcher hidden sm:flex items-center gap-2">
          <button
            data-lang="en"
            class="lang-btn px-2 py-1 rounded text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors focus-ring"
            aria-label="Switch to English"
          >
            EN
          </button>
          <span class="text-slate-300 dark:text-slate-600">|</span>
          <button
            data-lang="fr"
            class="lang-btn px-2 py-1 rounded text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors focus-ring"
            aria-label="Passer au franÃ§ais"
          >
            FR
          </button>
        </div>

        <!-- Theme Toggle -->
        <button
          id="themeToggle"
          aria-label="Toggle theme"
          class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors focus-ring"
        >
          <svg
            aria-hidden="true"
            class="w-5 h-5 text-slate-700 dark:text-slate-300"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <!-- Moon icon for light mode, sun icon for dark mode -->
            <path
              class="dark-icon"
              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
            <path
              class="light-icon hidden"
              d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
          </svg>
        </button>

        <!-- Contact Button (Desktop) -->
        <a
          href="/contact.html"
          class="hidden md:inline-flex items-center px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors focus-ring font-medium"
        >
          Contact
        </a>

        <!-- Mobile Menu Button -->
        <button
          id="mobileMenuBtn"
          aria-expanded="false"
          aria-label="Toggle mobile menu"
          class="md:hidden p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors focus-ring"
        >
          <svg
            id="menuIcon"
            aria-hidden="true"
            class="w-6 h-6 text-slate-700 dark:text-slate-300"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          <svg
            id="closeIcon"
            aria-hidden="true"
            class="w-6 h-6 hidden text-slate-700 dark:text-slate-300"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobileMenu"
    class="md:hidden hidden border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900"
  >
    <div class="px-4 py-4 space-y-2">
      <a href="/store.html" class="mobile-nav-link">Store</a>
      <a href="/ebooks.html" class="mobile-nav-link">eBooks</a>
      <a href="/audiobooks.html" class="mobile-nav-link">Audiobooks</a>
      <a href="/apps.html" class="mobile-nav-link">Apps</a>
      <a href="/games.html" class="mobile-nav-link">Games</a>
      <a href="/music.html" class="mobile-nav-link">Music</a>
      <a href="/blog.html" class="mobile-nav-link">Blog</a>
      <a href="/nini.html" class="mobile-nav-link">Nini's Adventures</a>

      <!-- Mobile Language Switcher -->
      <div class="flex items-center gap-2 px-4 py-2">
        <button data-lang="en" class="lang-btn flex-1 px-3 py-2 rounded bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">EN</button>
        <button data-lang="fr" class="lang-btn flex-1 px-3 py-2 rounded bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">FR</button>
      </div>

      <!-- Mobile Contact Button -->
      <a
        href="/contact.html"
        class="block px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors text-center font-medium"
      >
        Contact
      </a>
    </div>
  </div>
</nav>

<!-- Shared CSS for Navigation -->
<style>
  /* Skip Link */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--brand-600, #008ef6);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 0 0 0.5rem 0;
    font-weight: 600;
    z-index: 100;
    text-decoration: none;
  }

  .skip-link:focus {
    top: 0;
  }

  /* Navigation Links */
  .nav-link {
    position: relative;
    display: inline-block;
    padding: 0.5rem 0.75rem;
    color: #64748b; /* slate-500 */
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }

  .dark .nav-link {
    color: #cbd5e1; /* slate-300 */
  }

  .nav-link:hover {
    color: #008ef6; /* brand-600 */
    background: #f1f5f9; /* slate-100 */
    text-decoration: none;
  }

  .dark .nav-link:hover {
    color: #5abaff; /* brand-400 */
    background: #1e293b; /* slate-800 */
  }

  /* Active state (add .active class via JavaScript based on current page) */
  .nav-link.active {
    color: #008ef6;
    background: #e0f2ff; /* brand-100 */
  }

  .dark .nav-link.active {
    color: #5abaff;
    background: #1e293b;
  }

  /* Mobile Navigation Links */
  .mobile-nav-link {
    display: block;
    padding: 0.75rem 1rem;
    color: #64748b;
    font-weight: 500;
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }

  .dark .mobile-nav-link {
    color: #cbd5e1;
  }

  .mobile-nav-link:hover {
    background: #f1f5f9;
    color: #0f172a;
    text-decoration: none;
  }

  .dark .mobile-nav-link:hover {
    background: #1e293b;
    color: #f1f5f9;
  }

  /* Focus Ring */
  .focus-ring:focus-visible {
    outline: 2px solid #008ef6;
    outline-offset: 2px;
  }

  /* Language Switcher */
  .lang-btn {
    font-weight: 600;
    color: #64748b;
    transition: all 0.2s ease;
  }

  .dark .lang-btn {
    color: #cbd5e1;
  }

  .lang-btn.active {
    color: #008ef6;
    font-weight: 700;
  }

  .dark .lang-btn.active {
    color: #5abaff;
  }
</style>

<!-- Shared JavaScript for Navigation -->
<script>
  (function() {
    // Theme Toggle
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const darkIcon = document.querySelector('.dark-icon');
    const lightIcon = document.querySelector('.light-icon');

    const setTheme = (mode) => {
      if (mode === 'dark') {
        root.classList.add('dark');
        if (darkIcon && lightIcon) {
          darkIcon.classList.add('hidden');
          lightIcon.classList.remove('hidden');
        }
      } else {
        root.classList.remove('dark');
        if (darkIcon && lightIcon) {
          darkIcon.classList.remove('hidden');
          lightIcon.classList.add('hidden');
        }
      }
      localStorage.setItem('theme', mode);
    };

    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        const newMode = root.classList.contains('dark') ? 'light' : 'dark';
        setTheme(newMode);
      });
    }

    // Initialize theme
    (() => {
      const saved = localStorage.getItem('theme');
      if (saved) {
        setTheme(saved);
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        setTheme('dark');
      }
    })();

    // Mobile Menu Toggle
    const mobileBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuIcon = document.getElementById('menuIcon');
    const closeIcon = document.getElementById('closeIcon');

    if (mobileBtn && mobileMenu) {
      mobileBtn.addEventListener('click', () => {
        const isOpen = mobileMenu.classList.toggle('hidden');
        mobileBtn.setAttribute('aria-expanded', !isOpen);

        if (menuIcon && closeIcon) {
          menuIcon.classList.toggle('hidden', !isOpen);
          closeIcon.classList.toggle('hidden', isOpen);
        }

        // Focus management
        if (!isOpen) {
          const firstLink = mobileMenu.querySelector('a');
          if (firstLink) firstLink.focus();
        } else {
          mobileBtn.focus();
        }
      });
    }

    // Active Page Highlighting
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');

    navLinks.forEach(link => {
      const linkPath = new URL(link.href, window.location.origin).pathname;
      if (linkPath === currentPath || (currentPath === '/' && linkPath === '/index.html')) {
        link.classList.add('active');
        link.setAttribute('aria-current', 'page');
      }
    });

    // Language Switcher
    const currentLang = localStorage.getItem('language') || 'en';
    const langBtns = document.querySelectorAll('.lang-btn');

    const setLanguage = (lang) => {
      localStorage.setItem('language', lang);
      langBtns.forEach(btn => {
        if (btn.dataset.lang === lang) {
          btn.classList.add('active');
          btn.setAttribute('aria-pressed', 'true');
        } else {
          btn.classList.remove('active');
          btn.setAttribute('aria-pressed', 'false');
        }
      });

      // Dispatch custom event for language change
      document.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
    };

    langBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        setLanguage(btn.dataset.lang);
      });
    });

    // Initialize language
    setLanguage(currentLang);
  })();
</script>
